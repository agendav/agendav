/**
 * Freeow!
 * Stylish, Growl-like message boxes
 *
 * Copyright (c) 2011 PJ Dietz
 * Version: 1.00
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * http://pjdietz.com/jquery-plugins/freeow/
 */
(function($){"use strict";var Freeow;Freeow=function(title,message,options){var startStyle,i,u;this.options=$.extend({},$.fn.freeow.defaults,options);this.element=$(this.options.template(title,message));if(this.options.startStyle){startStyle=this.options.startStyle;}
else{startStyle=this.options.hideStyle;}
this.element.css(startStyle);this.element.data("freeow",this);for(i=0,u=this.options.classes.length;i<u;i+=1){this.element.addClass(this.options.classes[i]);}
this.element.click(this.options.onClick);this.element.hover(this.options.onHover);this.autoHide=false;};Freeow.prototype={attach:function(container){$(container).prepend(this.element);this.show();},show:function(){var opts,self,fn,delay;opts={duration:this.showDuration};if(this.options.autoHide&&this.options.autoHideDelay>0){this.autoHide=true;self=this;delay=this.options.autoHideDelay;fn=function(){if(self.autoHide){self.hide();}};opts.complete=function(){setTimeout(fn,delay);};}
this.element.animate(this.options.showStyle,opts);},hide:function(){var self=this;this.element.animate(this.options.hideStyle,{duration:this.options.hideDuration,complete:function(){self.destroy();}});},destroy:function(){this.element.data("freeow",undefined);this.element.remove();}};if(typeof $.fn.freeow==="undefined"){$.fn.extend({freeow:function(title,message,options){return this.each(function(){var f;f=new Freeow(title,message,options);f.attach(this);});}});$.fn.freeow.defaults={autoHide:true,autoHideDelay:3000,classes:[],startStyle:null,showStyle:{opacity:1.0},showDuration:250,hideStyle:{opacity:0.0},hideDuration:500,onClick:function(event){$(this).data("freeow").hide();},onHover:function(event){$(this).data("freeow").autoHide=false;},template:function(title,message){var e;e=['<div>','<div class="background">','<div class="content">','<h2>'+title+'</h2>','<p>'+message+'</p>','</div>','</div>','<span class="icon"></span>','<span class="close"></span>','</div>'].join("");return e;}};}}(jQuery));/*

 FullCalendar v1.5.3-rcube-0.7.1
 https://github.com/roundcube/fullcalendar

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2011 Adam Shaw
 Copyright (c) 2011, Kolab Systems AG
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Wed Mar 21 22:49:40 2012 +0100

*/
(function(o,sa){function Ab(a){o.extend(true,$a,a)}function $b(a,b,g){function c(l){if(H){u();R();aa();O(l)}else f()}function f(){P=b.theme?"ui":"fc";a.addClass("fc");b.isRTL&&a.addClass("fc-rtl");b.theme&&a.addClass("ui-widget");H=o("<div class='fc-content' style='position:relative'/>").prependTo(a);y=new ac(A,b);(Q=y.render())&&a.prepend(Q);r(b.defaultView);o(window).resize(la);d()||k()}function k(){setTimeout(function(){!i.start&&d()&&O()},0)}function q(){o(window).unbind("resize",la);y.destroy();
H.remove();a.removeClass("fc fc-rtl ui-widget")}function h(){return ma.offsetWidth!==0}function d(){return o("body")[0].offsetWidth!==0}function r(l){if(!i||l!=i.name){m++;ja();var s=i,da;if(s){(s.beforeHide||Bb)();ab(H,H.height());s.element.hide()}else ab(H,1);H.css("overflow","hidden");if(i=F[l])i.element.show();else i=F[l]=new Ha[l](da=ya=o("<div class='fc-view fc-view-"+l+"' style='position:absolute'/>").appendTo(H),A);s&&y.deactivateButton(s.name);y.activateButton(l);O();H.css("overflow","");
s&&ab(H,1);da||(i.afterShow||Bb)();m--}}function O(l){if(h()){m++;ja();fa===sa&&u();var s=false;if(!i.start||l||t<i.start||t>=i.end){i.render(t,l||0);B(true);s=true}else if(i.sizeDirty){i.clearEvents();B();s=true}else if(i.eventsDirty){i.clearEvents();s=true}i.sizeDirty=false;i.eventsDirty=false;ea(s);ga=a.outerWidth();y.updateTitle(i.title);l=new Date;l>=i.start&&l<i.end?y.disableButton("today"):y.enableButton("today");m--;i.trigger("viewDisplay",ma)}}function L(){R();if(h()){u();B();ja();i.clearEvents();
i.trigger("viewRender",i);i.renderEvents(X);i.sizeDirty=false}}function R(){o.each(F,function(l,s){s.sizeDirty=true})}function u(){fa=b.contentHeight?b.contentHeight:b.height?b.height-(Q?Q.height():0)-Ua(H):Math.round(H.width()/Math.max(b.aspectRatio,0.5))}function B(l){m++;i.setHeight(fa,l);if(ya){ya.css("position","relative");ya=null}i.setWidth(H.width(),l);m--}function la(){if(!m)if(i.start){var l=++j;setTimeout(function(){if(l==j&&!m&&h())if(ga!=(ga=a.outerWidth())){m++;L();i.trigger("windowResize",
ma);m--}},200)}else k()}function ea(l){if(!b.lazyFetching||ha(i.visStart,i.visEnd))na();else l&&V()}function na(l){E(i.visStart,i.visEnd,l)}function T(l){X=l;V()}function N(l){V(l)}function V(l){aa();if(h()){i.clearEvents();i.trigger("viewRender",i);i.renderEvents(X,l);i.eventsDirty=false}}function aa(){o.each(F,function(l,s){s.eventsDirty=true})}function Z(l,s,da){i.select(l,s,da===sa?true:da)}function ja(){i&&i.unselect()}function v(){O(-1)}function C(){O(1)}function ba(){jb(t,-1);O()}function W(){jb(t,
1);O()}function w(){t=new Date;O()}function p(l,s,da){if(l instanceof Date)t=G(l);else Cb(t,l,s,da);O()}function I(l,s,da){l!==sa&&jb(t,l);s!==sa&&kb(t,s);da!==sa&&ka(t,da);O()}function Y(){return G(t)}function ca(){return i}function e(l,s){if(s===sa)return b[l];if(l=="height"||l=="contentHeight"||l=="aspectRatio"){b[l]=s;L()}else if(l.indexOf("list")==0||l=="tableCols"){b[l]=s;i.start=null}else if(l=="maxHeight")b[l]=s}function M(l,s){if(b[l])return b[l].apply(s||ma,Array.prototype.slice.call(arguments,
2))}var A=this;A.options=b;A.render=c;A.destroy=q;A.refetchEvents=na;A.reportEvents=T;A.reportEventChange=N;A.rerenderEvents=V;A.changeView=r;A.select=Z;A.unselect=ja;A.prev=v;A.next=C;A.prevYear=ba;A.nextYear=W;A.today=w;A.gotoDate=p;A.incrementDate=I;A.formatDate=function(l,s){return Pa(l,s,b)};A.formatDates=function(l,s,da){return lb(l,s,da,b)};A.getDate=Y;A.getView=ca;A.option=e;A.trigger=M;bc.call(A,b,g);var ha=A.isFetchNeeded,E=A.fetchEvents,ma=a[0],y,Q,H,P,i,F={},ga,fa,ya,j=0,m=0,t=new Date,
X=[],z;Cb(t,b.year,b.month,b.date);b.droppable&&o(document).bind("dragstart",function(l,s){var da=l.target,pa=o(da);if(!pa.parents(".fc").length){var ra=b.dropAccept;if(o.isFunction(ra)?ra.call(da,pa):pa.is(ra)){z=da;i.dragStart(z,l,s)}}}).bind("dragstop",function(l,s){if(z){i.dragStop(z,l,s);z=null}})}function ac(a,b){function g(){R=b.theme?"ui":"fc";if(b.header)return L=o("<table class='fc-header' style='width:100%'/>").append(o("<tr/>").append(f("left")).append(f("center")).append(f("right")))}
function c(){L.remove()}function f(u){var B=o("<td class='fc-header-"+u+"'/>");(u=b.header[u])&&o.each(u.split(" "),function(la){la>0&&B.append("<span class='fc-header-space'/>");var ea;o.each(this.split(","),function(na,T){if(T=="title"){B.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>");ea&&ea.addClass(R+"-corner-right");ea=null}else{var N;if(a[T])N=a[T];else if(Ha[T])N=function(){aa.removeClass(R+"-state-hover");a.changeView(T)};if(N){na=b.theme?mb(b.buttonIcons,T):null;var V=mb(b.buttonText,
T),aa=o("<span class='fc-button "+(R=="ui"?"ui-button":"")+" fc-button-"+T+" "+R+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(na?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+na+"'/></span>":V)+"</span><span class='fc-button-effect'><span></span></span></span></span>");if(aa){aa.click(function(){aa.hasClass(R+"-state-disabled")||N()}).mousedown(function(){aa.not("."+R+"-state-active").not("."+R+"-state-disabled").addClass(R+"-state-down")}).mouseup(function(){aa.removeClass(R+
"-state-down")}).hover(function(){aa.not("."+R+"-state-active").not("."+R+"-state-disabled").addClass(R+"-state-hover")},function(){aa.removeClass(R+"-state-hover").removeClass(R+"-state-down")}).appendTo(B);ea||aa.addClass(R+"-corner-left");ea=aa}}}});ea&&ea.addClass(R+"-corner-right")});return B}function k(u){L.find("h2").html(u)}function q(u){L.find("span.fc-button-"+u).addClass(R+"-state-active")}function h(u){L.find("span.fc-button-"+u).removeClass(R+"-state-active")}function d(u){L.find("span.fc-button-"+
u).addClass(R+"-state-disabled")}function r(u){L.find("span.fc-button-"+u).removeClass(R+"-state-disabled")}var O=this;O.render=g;O.destroy=c;O.updateTitle=k;O.activateButton=q;O.deactivateButton=h;O.disableButton=d;O.enableButton=r;var L=o([]),R}function bc(a,b){function g(e,M){return!C||e<C||M>ba}function c(e,M,A){C=e;ba=M;W=e.getTimezoneOffset()*60*1E3;w=M.getTimezoneOffset()*60*1E3;ca=typeof A!="undefined"?o.grep(ca,function(E){return!na(E.source,A)}):[];e=++p;M=v.length;I=typeof A=="undefined"?
M:1;for(var ha=0;ha<M;ha++)if(typeof A=="undefined"||na(v[ha],A))f(v[ha],e)}function f(e,M){k(e,function(A){if(M==p){if(A){for(var ha=0;ha<A.length;ha++){A[ha].source=e;la(A[ha])}ca=ca.concat(A)}I--;I||Z(ca)}})}function k(e,M){var A,ha=Aa.sourceFetchers,E;for(A=0;A<ha.length;A++){E=ha[A](e,C,ba,M);if(E===true)return;else if(typeof E=="object"){k(E,M);return}}if(A=e.events)if(o.isFunction(A)){u();A(G(C),G(ba),function(P){M(P);B()})}else o.isArray(A)?M(A):M();else if(e.url){var ma=e.success,y=e.error,
Q=e.complete;A=o.extend({},e.data||{});E=Va(e.startParam,a.startParam);ha=Va(e.endParam,a.endParam);if(E){var H=C;if(e.startParamUTC)H-=W;A[E]=Math.round(+H/1E3)}if(ha){E=ba;if(e.endParamUTC)E-=w;A[ha]=Math.round(+E/1E3)}u();o.ajax(o.extend({},cc,e,{data:A,success:function(P){P=P||[];var i=bb(ma,this,arguments);if(o.isArray(i))P=i;M(P)},error:function(){bb(y,this,arguments);M()},complete:function(){bb(Q,this,arguments);B()}}))}else M()}function q(e){if(e=h(e)){I++;f(e,p)}}function h(e){if(o.isFunction(e)||
o.isArray(e))e={events:e};else if(typeof e=="string")e={url:e};if(typeof e=="object"){ea(e);v.push(e);return e}}function d(e){v=o.grep(v,function(M){return!na(M,e)});ca=o.grep(ca,function(M){return!na(M.source,e)});Z(ca)}function r(e){var M,A=ca.length,ha,E=aa().defaultEventEnd,ma=e.start-e._start,y=e.end?e.end-(e._end||E(e)):0;for(M=0;M<A;M++){ha=ca[M];if(ha._id==e._id&&ha!=e){ha.start=new Date(+ha.start+ma);ha.end=e.end?ha.end?new Date(+ha.end+y):new Date(+E(ha)+y):null;ha.title=e.title;ha.url=
e.url;ha.allDay=e.allDay;ha.className=e.className;ha.editable=e.editable;ha.color=e.color;ha.backgroudColor=e.backgroudColor;ha.borderColor=e.borderColor;ha.textColor=e.textColor;la(ha)}}la(e);Z(ca)}function O(e,M){la(e);if(!e.source)if(M){ja.events.push(e);e.source=ja}ca.push(e);Z(ca)}function L(e){if(e){if(!o.isFunction(e)){var M=e+"";e=function(ha){return ha._id==M}}ca=o.grep(ca,e,true);for(A=0;A<v.length;A++)if(o.isArray(v[A].events))v[A].events=o.grep(v[A].events,e,true)}else{ca=[];for(var A=
0;A<v.length;A++)if(o.isArray(v[A].events))v[A].events=[]}Z(ca)}function R(e){if(o.isFunction(e))return o.grep(ca,e);else if(e){e+="";return o.grep(ca,function(M){return M._id==e})}return ca}function u(){Y++||V("loading",null,true)}function B(){--Y||V("loading",null,false)}function la(e){var M=e.source||{},A=Va(M.ignoreTimezone,a.ignoreTimezone);e._id=e._id||(e.id===sa?"_fc"+dc++:e.id+"");if(e.date){if(!e.start)e.start=e.date;delete e.date}e._start=G(e.start=nb(e.start,A));e.end=nb(e.end,A);if(e.end&&
e.end<=e.start)e.end=null;e._end=e.end?G(e.end):null;if(e.allDay===sa)e.allDay=Va(M.allDayDefault,a.allDayDefault);if(e.className){if(typeof e.className=="string")e.className=e.className.split(/\s+/)}else e.className=[]}function ea(e){if(e.className){if(typeof e.className=="string")e.className=e.className.split(/\s+/)}else e.className=[];for(var M=Aa.sourceNormalizers,A=0;A<M.length;A++)M[A](e)}function na(e,M){return e&&M&&T(e)==T(M)}function T(e){return(typeof e=="object"?e.events||e.url:"")||e}
var N=this;N.isFetchNeeded=g;N.fetchEvents=c;N.addEventSource=q;N.removeEventSource=d;N.updateEvent=r;N.renderEvent=O;N.removeEvents=L;N.clientEvents=R;N.normalizeEvent=la;var V=N.trigger,aa=N.getView,Z=N.reportEvents,ja={events:[]},v=[ja],C,ba,W,w,p=0,I=0,Y=0,ca=[];for(N=0;N<b.length;N++)h(b[N])}function jb(a,b,g){a.setFullYear(a.getFullYear()+b);g||Ia(a);return a}function kb(a,b,g){if(+a){b=a.getMonth()+b;var c=G(a);c.setDate(1);c.setMonth(b);a.setMonth(b);for(g||Ia(a);a.getMonth()!=c.getMonth();)a.setDate(a.getDate()+
(a<c?1:-1))}return a}function ka(a,b,g){if(+a){b=a.getDate()+b;var c=G(a);c.setHours(9);c.setDate(b);a.setDate(b);g||Ia(a);ob(a,c)}return a}function ob(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*ec)}function xa(a,b){a.setMinutes(a.getMinutes()+b);return a}function Ia(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function G(a,b){if(b)return Ia(new Date(+a));return new Date(+a)}function Db(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());
return b}function Ja(a,b,g){for(b=b||1;!a.getDay()||g&&a.getDay()==1||!g&&a.getDay()==6;)ka(a,b);return a}function Ba(a,b){return Math.round((G(a,true)-G(b,true))/Qa)}function Cb(a,b,g,c){if(b!==sa&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(g!==sa&&g!=a.getMonth()){a.setDate(1);a.setMonth(g)}c!==sa&&a.setDate(c)}function nb(a,b){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*1E3);if(typeof a=="string"){if(a.match(/^\d+(\.\d+)?$/))return new Date(parseFloat(a)*
1E3);if(b===sa)b=true;return Eb(a,b)||(a?new Date(a):null)}return null}function Eb(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!a)return null;var g=new Date(a[1],0,1);if(b||!a[13]){b=new Date(a[1],0,1,9,0);if(a[3]){g.setMonth(a[3]-1);b.setMonth(a[3]-1)}if(a[5]){g.setDate(a[5]);b.setDate(a[5])}ob(g,b);a[7]&&g.setHours(a[7]);a[8]&&g.setMinutes(a[8]);a[10]&&g.setSeconds(a[10]);a[12]&&g.setMilliseconds(Number("0."+
a[12])*1E3);ob(g,b)}else{g.setUTCFullYear(a[1],a[3]?a[3]-1:0,a[5]||1);g.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?Number("0."+a[12])*1E3:0);if(a[14]){b=Number(a[16])*60+(a[18]?Number(a[18]):0);b*=a[15]=="-"?1:-1;g=new Date(+g+b*60*1E3)}}return g}function pb(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],10);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2],
10):0)}}function Pa(a,b,g){return lb(a,null,b,g)}function lb(a,b,g,c){c=c||$a;var f=a,k=b,q,h=g.length,d,r,O,L="";for(q=0;q<h;q++){d=g.charAt(q);if(d=="'")for(r=q+1;r<h;r++){if(g.charAt(r)=="'"){if(f){L+=r==q+1?"'":g.substring(q+1,r);q=r}break}}else if(d=="(")for(r=q+1;r<h;r++){if(g.charAt(r)==")"){q=Pa(f,g.substring(q+1,r),c);if(parseInt(q.replace(/\D/,""),10))L+=q;q=r;break}}else if(d=="[")for(r=q+1;r<h;r++){if(g.charAt(r)=="]"){d=g.substring(q+1,r);q=Pa(f,d,c);if(q!=Pa(k,d,c))L+=q;q=r;break}}else if(d==
"{"){f=b;k=a}else if(d=="}"){f=a;k=b}else{for(r=h;r>q;r--)if(O=fc[g.substring(q,r)]){if(f)L+=O(f,c);q=r-1;break}if(r==q)if(f)L+=d}}return L}function Wa(a){return a.end?gc(a.end,a.allDay):ka(G(a.start),1)}function gc(a,b){a=G(a);return b||a.getHours()||a.getMinutes()?ka(a,1):Ia(a)}function hc(a,b){return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Fb(a,b){return a.end>b.start&&a.start<b.end}function qb(a,b,g,c){var f=[],k,q=a.length,h,d,r,O,L;for(k=0;k<q;k++){h=a[k];d=h.start;
r=b[k];if(r>g&&d<c){if(d<g){d=G(g);O=false}else{d=d;O=true}if(r>c){r=G(c);L=false}else{r=r;L=true}f.push({event:h,start:d,end:r,isStart:O,isEnd:L,msLength:r-d})}}return f.sort(hc)}function rb(a){var b=[],g,c=a.length,f,k,q,h;for(g=0;g<c;g++){f=a[g];for(k=0;;){q=false;if(b[k])for(h=0;h<b[k].length;h++)if(Fb(b[k][h],f)){q=true;break}if(q)k++;else break}if(b[k])b[k].push(f);else b[k]=[f]}return b}function Gb(a,b,g){a.unbind("mouseover").mouseover(function(c){for(var f=c.target,k;f!=this;){k=f;f=f.parentNode}if((f=
k._fci)!==sa){k._fci=sa;k=b[f];g(k.event,k.element,k);o(c.target).trigger(c)}c.stopPropagation()})}function Xa(a,b,g){for(var c=0,f;c<a.length;c++){f=o(a[c]);f.width(Math.max(0,b-sb(f,g)))}}function Hb(a,b,g){for(var c=0,f;c<a.length;c++){f=o(a[c]);f.height(Math.max(0,b-Ua(f,g)))}}function sb(a,b){return ic(a)+jc(a)+(b?kc(a):0)}function ic(a){return(parseFloat(o.curCSS(a[0],"paddingLeft",true))||0)+(parseFloat(o.curCSS(a[0],"paddingRight",true))||0)}function kc(a){return(parseFloat(o.curCSS(a[0],
"marginLeft",true))||0)+(parseFloat(o.curCSS(a[0],"marginRight",true))||0)}function jc(a){return(parseFloat(o.curCSS(a[0],"borderLeftWidth",true))||0)+(parseFloat(o.curCSS(a[0],"borderRightWidth",true))||0)}function Ua(a,b){return lc(a)+mc(a)+(b?Ib(a):0)}function lc(a){return(parseFloat(o.curCSS(a[0],"paddingTop",true))||0)+(parseFloat(o.curCSS(a[0],"paddingBottom",true))||0)}function Ib(a){return(parseFloat(o.curCSS(a[0],"marginTop",true))||0)+(parseFloat(o.curCSS(a[0],"marginBottom",true))||0)}
function mc(a){return(parseFloat(o.curCSS(a[0],"borderTopWidth",true))||0)+(parseFloat(o.curCSS(a[0],"borderBottomWidth",true))||0)}function ab(a,b){b=typeof b=="number"?b+"px":b;a.each(function(g,c){c.style.cssText+=";min-height:"+b+";_height:"+b})}function Bb(){}function Jb(a,b){return a-b}function Kb(a){return Math.max.apply(Math,a)}function Ra(a){return(a<10?"0":"")+a}function mb(a,b){if(a[b]!==sa)return a[b];b=b.split(/(?=[A-Z])/);for(var g=b.length-1,c;g>=0;g--){c=a[b[g].toLowerCase()];if(c!==
sa)return c}return a[""]}function Ea(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Lb(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function tb(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function Sa(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function ub(a,b){a.each(function(g,c){c.className=c.className.replace(/^fc-\w*/,"fc-"+Mb[b.getDay()])})}function cb(a,b){var g=a.source||{},c=a.color,f=g.color,k=b("eventColor"),q=a.backgroundColor||c||g.backgroundColor||f||b("eventBackgroundColor")||k;c=a.borderColor||c||g.borderColor||f||b("eventBorderColor")||k;a=a.textColor||g.textColor||b("eventTextColor");b=[];q&&b.push("background-color:"+q);c&&b.push("border-color:"+c);a&&b.push("color:"+a);return b.join(";")}function bb(a,b,g){if(o.isFunction(a))a=
[a];if(a){var c,f;for(c=0;c<a.length;c++)f=a[c].apply(b,g)||f;return f}}function Va(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==sa)return arguments[a]}function nc(a,b){function g(h,d){if(d){kb(h,d);h.setDate(1)}h=G(h,true);h.setDate(1);d=kb(G(h),1);var r=G(h),O=G(d),L=f("firstDay"),R=f("weekends")?0:1;if(R){Ja(r);Ja(O,-1,true)}ka(r,-((r.getDay()-Math.max(L,R)+7)%7));ka(O,(7-O.getDay()+Math.max(L,R))%7);L=Math.round((O-r)/(Qa*7));if(f("weekMode")=="fixed"){ka(O,(6-L)*7);L=6}c.title=q(h,
f("titleFormat"));c.start=h;c.end=d;c.visStart=r;c.visEnd=O;k(6,L,R?5:7,true)}var c=this;c.render=g;vb.call(c,a,b,"month");var f=c.opt,k=c.renderBasic,q=b.formatDate}function oc(a,b){function g(h,d){d&&ka(h,d*7);h=ka(G(h),-((h.getDay()-f("firstDay")+7)%7));d=ka(G(h),7);var r=G(h),O=G(d),L=f("weekends");if(!L){Ja(r);Ja(O,-1,true)}c.title=q(r,ka(G(O),-1),f("titleFormat"));c.start=h;c.end=d;c.visStart=r;c.visEnd=O;k(1,1,L?7:5,false)}var c=this;c.render=g;vb.call(c,a,b,"basicWeek");var f=c.opt,k=c.renderBasic,
q=b.formatDates}function pc(a,b){function g(h,d){if(d){ka(h,d);f("weekends")||Ja(h,d<0?-1:1)}c.title=q(h,f("titleFormat"));c.start=c.visStart=G(h,true);c.end=c.visEnd=ka(G(c.start),1);k(1,1,1,false)}var c=this;c.render=g;vb.call(c,a,b,"basicDay");var f=c.opt,k=c.renderBasic,q=b.formatDate}function vb(a,b,g){function c(x,J,$,S){j=J;m=$;f();(J=!y)?k(x,S):ca();q(J)}function f(){if(l=I("isRTL")){s=-1;da=m-1}else{s=1;da=0}pa=I("firstDay");ra=I("weekends")?0:1;qa=I("theme")?"ui":"fc";ua=I("columnFormat")}
function k(x,J){var $,S=qa+"-widget-header",oa=qa+"-widget-content",ia;$="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(ia=0;ia<m;ia++)$+="<th class='fc- "+S+"'/>";$+="</tr></thead><tbody>";for(ia=0;ia<x;ia++){$+="<tr class='fc-week"+ia+"'>";for(S=0;S<m;S++)$+="<td class='fc- "+oa+" fc-day"+(ia*m+S)+"'><div>"+(J?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";$+="</tr>"}$+="</tbody></table>";
x=o($).appendTo(a);E=x.find("thead");ma=E.find("th");y=x.find("tbody");Q=y.find("tr");H=y.find("td");P=H.filter(":first-child");i=Q.eq(0).find("div.fc-day-content div");Sa(E.add(E.find("tr")));Sa(Q);Q.eq(0).addClass("fc-first");r(H);F=o("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}function q(x){var J=x||j==1,$=p.start.getMonth(),S=Ia(new Date),oa,ia,va;J&&ma.each(function(wa,Ca){oa=o(Ca);ia=C(wa);oa.html(ha(ia,ua));ub(oa,ia)});H.each(function(wa,Ca){oa=o(Ca);ia=C(wa);ia.getMonth()==
$?oa.removeClass("fc-other-month"):oa.addClass("fc-other-month");+ia==+S?oa.addClass(qa+"-state-highlight fc-today"):oa.removeClass(qa+"-state-highlight fc-today");oa.find("div.fc-day-number").text(ia.getDate());J&&ub(oa,ia)});Q.each(function(wa,Ca){va=o(Ca);if(wa<j){va.show();wa==j-1?va.addClass("fc-last"):va.removeClass("fc-last")}else va.hide()})}function h(x){fa=x;x=fa-E.height();var J,$,S;if(I("weekMode")=="variable")J=$=Math.floor(x/(j==1?2:6));else{J=Math.floor(x/j);$=x-J*(j-1)}P.each(function(oa,
ia){if(oa<j){S=o(ia);ab(S.find("> div"),(oa==j-1?$:J)-Ua(S))}})}function d(x){ga=x;z.clear();ya=Math.floor(ga/m);Xa(ma.slice(0,-1),ya)}function r(x){x.click(O).mousedown(A)}function O(x){if(!I("selectable")){var J=parseInt(this.className.match(/fc\-day(\d+)/)[1]);J=C(J);Y("dayClick",this,J,true,x)}}function L(x,J,$){$&&t.build();$=G(p.visStart);for(var S=ka(G($),m),oa=0;oa<j;oa++){var ia=new Date(Math.max($,x)),va=new Date(Math.min(S,J));if(ia<va){var wa;if(l){wa=Ba(va,$)*s+da+1;ia=Ba(ia,$)*s+da+
1}else{wa=Ba(ia,$);ia=Ba(va,$)}r(R(oa,wa,oa,ia-1))}ka($,7);ka(S,7)}}function R(x,J,$,S){x=t.rect(x,J,$,S,a);return e(x,a)}function u(x){return G(x)}function B(x,J){L(x,ka(G(J),1),true)}function la(){M()}function ea(x,J,$){var S=Z(x);Y("dayClick",H[S.row*m+S.col],x,J,$)}function na(x,J){X.start(function($){M();$&&R($.row,$.col,$.row,$.col)},J)}function T(x,J,$){var S=X.stop();M();if(S){S=ja(S);Y("drop",x,S,true,J,$)}}function N(x){return G(x.start)}function V(x){return z.left(x)}function aa(x){return z.right(x)}
function Z(x){return{row:Math.floor(Ba(x,p.visStart)/7),col:ba(x.getDay())}}function ja(x){return v(x.row,x.col)}function v(x,J){return ka(G(p.visStart),x*7+J*s+da)}function C(x){return v(Math.floor(x/m),x%m)}function ba(x){return(x-Math.max(pa,ra)+m)%m*s+da}function W(x){return Q.eq(x)}function w(){return{left:0,right:ga}}var p=this;p.renderBasic=c;p.setHeight=h;p.setWidth=d;p.renderDayOverlay=L;p.defaultSelectionEnd=u;p.renderSelection=B;p.clearSelection=la;p.reportDayClick=ea;p.dragStart=na;p.dragStop=
T;p.defaultEventEnd=N;p.getHoverListener=function(){return X};p.colContentLeft=V;p.colContentRight=aa;p.dayOfWeekCol=ba;p.dateCell=Z;p.cellDate=ja;p.cellIsAllDay=function(){return true};p.allDayRow=W;p.allDayBounds=w;p.getRowCnt=function(){return j};p.getColCnt=function(){return m};p.getColWidth=function(){return ya};p.getDaySegmentContainer=function(){return F};db.call(p,a,b,g);Nb.call(p);Ob.call(p);qc.call(p);var I=p.opt,Y=p.trigger,ca=p.clearEvents,e=p.renderOverlay,M=p.clearOverlays,A=p.daySelectionMousedown,
ha=b.formatDate,E,ma,y,Q,H,P,i,F,ga,fa,ya,j,m,t,X,z,l,s,da,pa,ra,qa,ua;tb(a.addClass("fc-grid"));t=new Pb(function(x,J){var $,S,oa;ma.each(function(ia,va){$=o(va);S=$.offset().left;if(ia)oa[1]=S;oa=[S];J[ia]=oa});oa[1]=S+$.outerWidth();Q.each(function(ia,va){if(ia<j){$=o(va);S=$.offset().top;if(ia)oa[1]=S;oa=[S];x[ia]=oa}});oa[1]=S+$.outerHeight()});X=new Qb(t);z=new Rb(function(x){return i.eq(x)})}function qc(){function a(v,C){O(v);Z(g(v),C)}function b(){L();ea().empty()}function g(v){var C=V(),
ba=aa(),W=G(k.visStart);ba=ka(G(W),ba);var w=o.map(v,Wa),p,I,Y,ca,e,M,A=[];for(p=0;p<C;p++){I=rb(qb(v,w,W,ba));for(Y=0;Y<I.length;Y++){ca=I[Y];for(e=0;e<ca.length;e++){M=ca[e];M.row=p;M.level=Y;A.push(M)}}ka(W,7);ka(ba,7)}return A}function c(v,C,ba){d(v)&&f(v,C);ba.isEnd&&r(v)&&ja(v,C,ba);R(v,C)}function f(v,C){var ba=na(),W;C.draggable({zIndex:9,delay:50,opacity:q("dragOpacity"),revertDuration:q("dragRevertDuration"),start:function(w,p){h("eventDragStart",C,v,w,p);B(v,C);ba.start(function(I,Y,ca,
e){C.draggable("option","revert",!I||!ca&&!e);N();if(I){W=ca*7+e*(q("isRTL")?-1:1);T(ka(G(v.start),W),ka(Wa(v),W))}else W=0},w,"drag")},stop:function(w,p){ba.stop();N();h("eventDragStop",C,v,w,p);if(W)la(this,v,W,0,v.allDay,w,p);else{C.css("filter","");u(v,C)}}})}var k=this;k.renderEvents=a;k.compileDaySegs=g;k.clearEvents=b;k.bindDaySeg=c;wb.call(k);var q=k.opt,h=k.trigger,d=k.isEventDraggable,r=k.isEventResizable,O=k.reportEvents,L=k.reportEventClear,R=k.eventElementHandlers,u=k.showEvents,B=k.hideEvents,
la=k.eventDrop,ea=k.getDaySegmentContainer,na=k.getHoverListener,T=k.renderDayOverlay,N=k.clearOverlays,V=k.getRowCnt,aa=k.getColCnt,Z=k.renderDaySegs,ja=k.resizableDayEvent}function rc(a,b){function g(h,d){d&&ka(h,d*7);h=ka(G(h),-((h.getDay()-f("firstDay")+7)%7));d=ka(G(h),7);var r=G(h),O=G(d),L=f("weekends");if(!L){Ja(r);Ja(O,-1,true)}c.title=q(r,ka(G(O),-1),f("titleFormat"));c.start=h;c.end=d;c.visStart=r;c.visEnd=O;k(L?7:5)}var c=this;c.render=g;Sb.call(c,a,b,"agendaWeek");var f=c.opt,k=c.renderAgenda,
q=b.formatDates}function sc(a,b){function g(h,d){if(d){ka(h,d);f("weekends")||Ja(h,d<0?-1:1)}d=G(h,true);var r=ka(G(d),1);c.title=q(h,f("titleFormat"));c.start=c.visStart=d;c.end=c.visEnd=r;k(1)}var c=this;c.render=g;Sb.call(c,a,b,"agendaDay");var f=c.opt,k=c.renderAgenda,q=b.formatDate}function Sb(a,b,g){function c(n){Da=n;f();j?Q():k();q()}function f(){Ya=ma("theme")?"ui":"fc";Tb=ma("weekends")?0:1;Ub=ma("firstDay");if(Vb=ma("isRTL")){Ka=-1;La=Da-1}else{Ka=1;La=0}Ma=pb(ma("minTime"));eb=pb(ma("maxTime"));
Wb=ma("columnFormat")}function k(){var n=Ya+"-widget-header",U=Ya+"-widget-content",K,D,ta,za,Fa,Ga=ma("slotMinutes")%15==0;K="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+n+"'>&nbsp;</th>";for(D=0;D<Da;D++)K+="<th class='fc- fc-col"+D+" "+n+"'/>";K+="<th class='fc-agenda-gutter "+n+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+n+"'>&nbsp;</th>";for(D=0;D<Da;D++)K+="<td class='fc- fc-col"+D+" "+U+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";
K+="<td class='fc-agenda-gutter "+U+"'>&nbsp;</td></tr></tbody></table>";j=o(K).appendTo(a);m=j.find("thead");t=m.find("th").slice(1,-1);X=j.find("tbody");z=X.find("td").slice(0,-1);l=z.find("div.fc-day-content div");s=z.eq(0);da=s.find("> div");Sa(m.add(m.find("tr")));Sa(X.add(X.find("tr")));ia=m.find("th:first");va=j.find(".fc-agenda-gutter");pa=o("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a);if(ma("allDaySlot")){ra=o("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(pa);
K="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+n+" fc-agenda-axis'>"+ma("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+n+" fc-agenda-gutter'>&nbsp;</th></tr></table>";qa=o(K).appendTo(pa);ua=qa.find("tr");R(ua.find("td"));ia=ia.add(qa.find("th:first"));va=va.add(qa.find("th.fc-agenda-gutter"));pa.append("<div class='fc-agenda-divider "+n+"'><div class='fc-agenda-divider-inner'/></div>")}else ra=o([]);
x=o("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(pa);J=o("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(x);$=o("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(J);K="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";ta=Db();za=xa(G(ta),eb);xa(ta,Ma);for(D=xb=0;ta<za;D++){Fa=ta.getMinutes();K+="<tr class='fc-slot"+D+" "+(!Fa?"":"fc-minor")+"'><th class='fc-agenda-axis "+n+"'>"+(!Ga||!Fa?
ya(ta,ma("axisFormat")):"&nbsp;")+"</th><td class='"+U+"'><div style='position:relative'>&nbsp;</div></td></tr>";xa(ta,ma("slotMinutes"));xb++}K+="</tbody></table>";S=o(K).appendTo(J);oa=S.find("div:first");u(S.find("td"));ia=ia.add(S.find("th:first"))}function q(){var n,U,K,D,ta=Ia(new Date);for(n=0;n<Da;n++){D=Z(n);U=t.eq(n);U.html(ya(D,Wb));K=z.eq(n);+D==+ta?K.addClass(Ya+"-state-highlight fc-today"):K.removeClass(Ya+"-state-highlight fc-today");ub(U.add(K),D)}}function h(n,U){if(n===sa)n=Xb;Xb=
n;yb={};var K=X.position().top,D=x.position().top;n=Math.min(n-K,S.height()+D+1);da.height(n-Ua(s));pa.css("top",K);x.height(n-D-1);Za=oa.height()+1;U&&r()}function d(n){Ca=n;fb.clear();Na=0;Xa(ia.width("").each(function(U,K){Na=Math.max(Na,o(K).outerWidth())}),Na);n=x[0].clientWidth;if(zb=x.width()-n){Xa(va,zb);va.show().prev().removeClass("fc-last")}else va.hide().prev().addClass("fc-last");gb=Math.floor((n-Na)/Da);Xa(t.slice(0,-1),gb)}function r(){function n(){x.scrollTop(D)}var U=Db(),K=G(U);
K.setHours(ma("firstHour"));var D=C(U,K)+1;n();setTimeout(n,0)}function O(){Yb=x.scrollTop()}function L(){x.scrollTop(Yb)}function R(n){n.click(B).mousedown(ga)}function u(n){n.click(B).mousedown(e)}function B(n){if(!ma("selectable")){var U=Math.min(Da-1,Math.floor((n.pageX-j.offset().left-Na)/gb)),K=Z(U),D=this.parentNode.className.match(/fc-slot(\d+)/);if(D){D=parseInt(D[1])*ma("slotMinutes");var ta=Math.floor(D/60);K.setHours(ta);K.setMinutes(D%60+Ma);y("dayClick",z[U],K,false,n)}else y("dayClick",
z[U],K,true,n)}}function la(n,U,K){K&&Oa.build();var D=G(E.visStart);if(Vb){K=Ba(U,D)*Ka+La+1;n=Ba(n,D)*Ka+La+1}else{K=Ba(n,D);n=Ba(U,D)}K=Math.max(0,K);n=Math.min(Da,n);K<n&&R(ea(0,K,0,n-1))}function ea(n,U,K,D){n=Oa.rect(n,U,K,D,pa);return H(n,pa)}function na(n,U){for(var K=G(E.visStart),D=ka(G(K),1),ta=0;ta<Da;ta++){var za=new Date(Math.max(K,n)),Fa=new Date(Math.min(D,U));if(za<Fa){var Ga=ta*Ka+La;Ga=Oa.rect(0,Ga,0,Ga,J);za=C(K,za);Fa=C(K,Fa);Ga.top=za;Ga.height=Fa-za;u(H(Ga,J))}ka(K,1);ka(D,
1)}}function T(n){return fb.left(n)}function N(n){return fb.right(n)}function V(n){return{row:Math.floor(Ba(n,E.visStart)/7),col:v(n.getDay())}}function aa(n){var U=Z(n.col);n=n.row;ma("allDaySlot")&&n--;n>=0&&xa(U,Ma+n*ma("slotMinutes"));return U}function Z(n){return ka(G(E.visStart),n*Ka+La)}function ja(n){return ma("allDaySlot")&&!n.row}function v(n){return(n-Math.max(Ub,Tb)+Da)%Da*Ka+La}function C(n,U){n=G(n,true);if(U<xa(G(n),Ma))return 0;if(U>=xa(G(n),eb))return S.height();n=ma("slotMinutes");
U=U.getHours()*60+U.getMinutes()-Ma;var K=Math.floor(U/n),D=yb[K];if(D===sa)D=yb[K]=S.find("tr:eq("+K+") td div")[0].offsetTop;return Math.max(0,Math.round(D-1+Za*(U%n/n)))}function ba(){return{left:Na,right:Ca-zb}}function W(){return ua}function w(n){var U=G(n.start);if(n.allDay)return U;return xa(U,ma("defaultEventMinutes"))}function p(n,U){if(U)return G(n);return xa(G(n),ma("slotMinutes"))}function I(n,U,K){if(K)ma("allDaySlot")&&la(n,ka(G(U),1),true);else Y(n,U)}function Y(n,U){var K=ma("selectHelper");
Oa.build();if(K){var D=Ba(n,E.visStart)*Ka+La;if(D>=0&&D<Da){D=Oa.rect(0,D,0,D,J);var ta=C(n,n),za=C(n,U);if(za>ta){D.top=ta;D.height=za-ta;D.left+=2;D.width-=5;if(o.isFunction(K)){if(n=K(n,U)){D.position="absolute";D.zIndex=8;wa=o(n).css(D).appendTo(J)}}else{D.isStart=true;D.isEnd=true;wa=o(fa({title:"",start:n,end:U,className:["fc-select-helper"],editable:false},D));wa.css("opacity",ma("dragOpacity"))}if(wa){u(wa);J.append(wa);Xa(wa,D.width,true);Hb(wa,D.height,true)}}}}else na(n,U)}function ca(){P();
if(wa){wa.remove();wa=null}}function e(n){if(n.which==1&&ma("selectable")){F(n);var U,K=ma("selectHelper");Ta.start(function(D,ta){ca();if(D&&(D.col==ta.col||!K)&&!ja(D)){ta=aa(ta);D=aa(D);U=[ta,xa(G(ta),ma("slotMinutes")),D,xa(G(D),ma("slotMinutes"))].sort(Jb);Y(U[0],U[3])}else U=null},n);o(document).one("mouseup",function(D){Ta.stop();if(U){+U[0]==+U[1]&&M(U[0],false,D);i(U[0],U[3],false,D)}})}}function M(n,U,K){y("dayClick",z[v(n.getDay())],n,U,K)}function A(n,U){Ta.start(function(K){P();if(K)if(ja(K))ea(K.row,
K.col,K.row,K.col);else{K=aa(K);var D=xa(G(K),ma("defaultEventMinutes"));na(K,D)}},U)}function ha(n,U,K){var D=Ta.stop();P();D&&y("drop",n,aa(D),ja(D),U,K)}var E=this;E.renderAgenda=c;E.setWidth=d;E.setHeight=h;E.beforeHide=O;E.afterShow=L;E.defaultEventEnd=w;E.timePosition=C;E.dayOfWeekCol=v;E.dateCell=V;E.cellDate=aa;E.cellIsAllDay=ja;E.allDayRow=W;E.allDayBounds=ba;E.getHoverListener=function(){return Ta};E.colContentLeft=T;E.colContentRight=N;E.getDaySegmentContainer=function(){return ra};E.getSlotSegmentContainer=
function(){return $};E.getMinMinute=function(){return Ma};E.getMaxMinute=function(){return eb};E.getBodyContent=function(){return J};E.getRowCnt=function(){return 1};E.getColCnt=function(){return Da};E.getColWidth=function(){return gb};E.getSlotHeight=function(){return Za};E.defaultSelectionEnd=p;E.renderDayOverlay=la;E.renderSelection=I;E.clearSelection=ca;E.reportDayClick=M;E.dragStart=A;E.dragStop=ha;db.call(E,a,b,g);Nb.call(E);Ob.call(E);tc.call(E);var ma=E.opt,y=E.trigger,Q=E.clearEvents,H=E.renderOverlay,
P=E.clearOverlays,i=E.reportSelection,F=E.unselect,ga=E.daySelectionMousedown,fa=E.slotSegHtml,ya=b.formatDate,j,m,t,X,z,l,s,da,pa,ra,qa,ua,x,J,$,S,oa,ia,va,wa,Ca,Xb,Na,gb,zb,Za,Yb,Da,xb,Oa,Ta,fb,yb={},Ya,Ub,Tb,Vb,Ka,La,Ma,eb,Wb;tb(a.addClass("fc-agenda"));Oa=new Pb(function(n,U){function K(hb){return Math.max(Ga,Math.min(uc,hb))}var D,ta,za;t.each(function(hb,vc){D=o(vc);ta=D.offset().left;if(hb)za[1]=ta;za=[ta];U[hb]=za});za[1]=ta+D.outerWidth();if(ma("allDaySlot")){D=ua;ta=D.offset().top;n[0]=
[ta,ta+D.outerHeight()]}for(var Fa=J.offset().top,Ga=x.offset().top,uc=Ga+x.outerHeight(),ib=0;ib<xb;ib++)n.push([K(Fa+Za*ib),K(Fa+Za*(ib+1))])});Ta=new Qb(Oa);fb=new Rb(function(n){return l.eq(n)})}function tc(){function a(j,m){N(j);var t,X=j.length,z=[],l=[];for(t=0;t<X;t++)j[t].allDay?z.push(j[t]):l.push(j[t]);if(B("allDaySlot")){Y(g(z),m);Z()}k(c(l),m);if(B("currentTimeIndicator")){window.clearInterval(ya);ya=window.setInterval(r,3E4);r()}}function b(){V();ja().empty();v().empty()}function g(j){j=
rb(qb(j,o.map(j,Wa),u.visStart,u.visEnd));var m,t=j.length,X,z,l,s=[];for(m=0;m<t;m++){X=j[m];for(z=0;z<X.length;z++){l=X[z];l.row=0;l.level=m;s.push(l)}}return s}function c(j){var m=e(),t=W(),X=ba(),z=xa(G(u.visStart),t),l=o.map(j,f),s,da,pa,ra,qa,ua,x=[];for(s=0;s<m;s++){da=rb(qb(j,l,z,xa(G(z),X-t)));wc(da);for(pa=0;pa<da.length;pa++){ra=da[pa];for(qa=0;qa<ra.length;qa++){ua=ra[qa];ua.col=s;ua.level=pa;x.push(ua)}}ka(z,1,true)}return x}function f(j){return j.end?G(j.end):xa(G(j.start),B("defaultEventMinutes"))}
function k(j,m){var t,X=j.length,z,l,s,da,pa,ra,qa,ua,x,J="",$,S,oa={},ia={},va=v(),wa;t=e();var Ca=t>1;if($=B("isRTL")){S=-1;wa=t-1}else{S=1;wa=0}for(t=0;t<X;t++){z=j[t];l=z.event;s=w(z.start,z.start);da=w(z.start,z.end);pa=z.col;ra=z.level;qa=z.forward||0;ua=p(pa*S+wa);x=I(pa*S+wa)-ua;x=Math.min(x-6,x*0.95);pa=ra?x/(ra+qa+1):qa?Ca?(x/(qa+1)-6)*2:(pa=x/(qa+1)):x;ra=ua+x/(ra+qa+1)*ra*S+($?x-pa:0);z.top=s;z.left=ra;z.outerWidth=pa-(Ca?0:1);z.outerHeight=da-s;J+=q(l,z)}va[0].innerHTML=J;$=va.children();
for(t=0;t<X;t++){z=j[t];l=z.event;J=o($[t]);S=la("eventRender",l,l,J);if(S===false)J.remove();else{if(S&&S!==true){J.remove();J=o(S).css({position:"absolute",top:z.top,left:z.left}).appendTo(va)}z.element=J;if(l._id===m)d(l,J,z);else J[0]._fci=t;E(l,J)}}Gb(va,j,d);for(t=0;t<X;t++){z=j[t];if(J=z.element){l=oa[m=z.key=Lb(J[0])];z.vsides=l===sa?(oa[m]=Ua(J,true)):l;l=ia[m];z.hsides=l===sa?(ia[m]=sb(J,true)):l;m=J.find("div.fc-event-content");if(m.length)z.contentTop=m[0].offsetTop}}for(t=0;t<X;t++){z=
j[t];if(J=z.element){J[0].style.width=Math.max(0,z.outerWidth-z.hsides)+"px";oa=Math.max(0,z.outerHeight-z.vsides);J[0].style.height=oa+"px";l=z.event;if(z.contentTop!==sa&&oa-z.contentTop<10){J.find("div.fc-event-time").text(ga(l.start,B("timeFormat"))+" - "+l.title);J.find("div.fc-event-title").remove()}la("eventAfterRender",l,l,J)}}}function q(j,m){var t="<",X=j.url,z=cb(j,B),l=z?" style='"+z+"'":"",s=["fc-event","fc-event-skin","fc-event-vert"];ea(j)&&s.push("fc-event-draggable");m.isStart&&s.push("fc-corner-top");
m.isEnd&&s.push("fc-corner-bottom");s=s.concat(j.className);if(j.source)s=s.concat(j.source.className||[]);t+=X?"a href='"+Ea(j.url)+"'":"div";t+=" class='"+s.join(" ")+"' style='position:absolute;z-index:8;top:"+m.top+"px;left:"+m.left+"px;"+z+"'><div class='fc-event-inner fc-event-skin'"+l+"><div class='fc-event-head fc-event-skin'"+l+"><div class='fc-event-time'>"+Ea(fa(j.start,j.end,B("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+Ea(j.title)+"</div></div><div class='fc-event-bg'></div></div>";
if(m.isEnd&&na(j))t+="<div class='ui-resizable-handle ui-resizable-s'>=</div>";t+="</"+(X?"a":"div")+">";return t}function h(j,m,t){ea(j)&&O(j,m,t.isStart);t.isEnd&&na(j)&&ca(j,m,t);aa(j,m)}function d(j,m,t){var X=m.find("div.fc-event-time");ea(j)&&L(j,m,X);t.isEnd&&na(j)&&R(j,m,X);aa(j,m)}function r(){var j=ha(),m=j.children(".fc-timeline");if(m.length==0)m=o("<hr>").addClass("fc-timeline").appendTo(j);var t=new Date;if(u.visStart<t&&u.visEnd>t){m.show();t=(t.getHours()*60*60+t.getMinutes()*60+t.getSeconds())/
86400;m.css("top",Math.floor(j.height()*t-1)+"px");if(u.name=="agendaWeek"){t=o(".fc-today",u.element);j=t.position().left+1;t=t.width();m.css({left:j+"px",width:t+"px"})}}else m.hide()}function O(j,m,t){function X(){if(!s){m.width(z).height("").draggable("option","grid",null);s=true}}var z,l,s=true,da,pa=B("isRTL")?-1:1,ra=C(),qa=M(),ua=A(),x=W();m.draggable({zIndex:9,opacity:B("dragOpacity","month"),revertDuration:B("dragRevertDuration"),start:function(J,$){la("eventDragStart",m,j,J,$);y(j,m);z=
m.width();ra.start(function(S,oa,ia,va){i();if(S){l=false;da=va*pa;if(S.row)if(t){if(s){m.width(qa-10);Hb(m,ua*Math.round((j.end?(j.end-j.start)/xc:B("defaultEventMinutes"))/B("slotMinutes")));m.draggable("option","grid",[qa,1]);s=false}}else l=true;else{P(ka(G(j.start),da),ka(Wa(j),da));X()}l=l||s&&!da}else{X();l=true}m.draggable("option","revert",l)},J,"drag")},stop:function(J,$){ra.stop();i();la("eventDragStop",m,j,J,$);if(l){X();m.css("filter","");ma(j,m)}else{var S=0;s||(S=Math.round((m.offset().top-
ha().offset().top)/ua)*B("slotMinutes")+x-(j.start.getHours()*60+j.start.getMinutes()));Q(this,j,da,S,s,J,$)}}})}function L(j,m,t){function X(S){var oa=xa(G(j.start),S),ia;if(j.end)ia=xa(G(j.end),S);t.text(fa(oa,ia,B("timeFormat")))}function z(){if(s){t.css("display","");m.draggable("option","grid",[J,$]);s=false}}var l,s=false,da,pa,ra,qa=B("isRTL")?-1:1,ua=C(),x=e(),J=M(),$=A();m.draggable({zIndex:9,scroll:false,grid:[J,$],axis:x==1?"y":false,opacity:B("dragOpacity"),revertDuration:B("dragRevertDuration"),
start:function(S,oa){la("eventDragStart",m,j,S,oa);y(j,m);l=m.position();pa=ra=0;ua.start(function(ia,va,wa,Ca){m.draggable("option","revert",!ia);i();if(ia){da=Ca*qa;if(B("allDaySlot")&&!ia.row){if(!s){s=true;t.hide();m.draggable("option","grid",null)}P(ka(G(j.start),da),ka(Wa(j),da))}else z()}},S,"drag")},drag:function(S,oa){pa=Math.round((oa.position.top-l.top)/$)*B("slotMinutes");if(pa!=ra){s||X(pa);ra=pa}},stop:function(S,oa){var ia=ua.stop();i();la("eventDragStop",m,j,S,oa);if(ia&&(da||pa||
s))Q(this,j,da,s?0:pa,s,S,oa);else{z();m.css("filter","");m.css(l);X(0);ma(j,m)}}})}function R(j,m,t){var X,z,l=A();m.resizable({handles:{s:"div.ui-resizable-s"},grid:l,start:function(s,da){X=z=0;y(j,m);m.css("z-index",9);la("eventResizeStart",this,j,s,da)},resize:function(s,da){X=Math.round((Math.max(l,m.height())-da.originalSize.height)/l);if(X!=z){t.text(fa(j.start,!X&&!j.end?null:xa(T(j),B("slotMinutes")*X),B("timeFormat")));z=X}},stop:function(s,da){la("eventResizeStop",this,j,s,da);if(X)H(this,
j,0,B("slotMinutes")*X,s,da);else{m.css("z-index",8);ma(j,m)}}})}var u=this;u.renderEvents=a;u.compileDaySegs=g;u.clearEvents=b;u.slotSegHtml=q;u.bindDaySeg=h;wb.call(u);var B=u.opt,la=u.trigger,ea=u.isEventDraggable,na=u.isEventResizable,T=u.eventEnd,N=u.reportEvents,V=u.reportEventClear,aa=u.eventElementHandlers,Z=u.setHeight,ja=u.getDaySegmentContainer,v=u.getSlotSegmentContainer,C=u.getHoverListener,ba=u.getMaxMinute,W=u.getMinMinute,w=u.timePosition,p=u.colContentLeft,I=u.colContentRight,Y=u.renderDaySegs,
ca=u.resizableDayEvent,e=u.getColCnt,M=u.getColWidth,A=u.getSlotHeight,ha=u.getBodyContent,E=u.reportEventElement,ma=u.showEvents,y=u.hideEvents,Q=u.eventDrop,H=u.eventResize,P=u.renderDayOverlay,i=u.clearOverlays,F=u.calendar,ga=F.formatDate,fa=F.formatDates,ya}function wc(a){var b,g,c,f,k,q;for(b=a.length-1;b>0;b--){f=a[b];for(g=0;g<f.length;g++){k=f[g];for(c=0;c<a[b-1].length;c++){q=a[b-1][c];if(Fb(k,q))q.forward=Math.max(q.forward||0,(k.forward||0)+1)}}}}function db(a,b,g){function c(w,p){w=W[w];
if(typeof w=="object"&&!w.length)return mb(w,p||g);return w}function f(w,p){return b.trigger.apply(b,[w,p||V].concat(Array.prototype.slice.call(arguments,2),[V]))}function k(w){return h(w)&&!c("disableDragging")}function q(w){return h(w)&&!c("disableResizing")}function h(w){return Va(w.editable,(w.source||{}).editable,c("editable"))}function d(w){v={};var p,I=w.length,Y;for(p=0;p<I;p++){Y=w[p];if(v[Y._id])v[Y._id].push(Y);else v[Y._id]=[Y]}}function r(w){return w.end?G(w.end):aa(w)}function O(w,p){C.push(p);
if(ba[w._id])ba[w._id].push(p);else ba[w._id]=[p]}function L(){C=[];ba={}}function R(w,p){p.click(function(I){if(!p.hasClass("ui-draggable-dragging")&&!p.hasClass("ui-resizable-resizing"))return f("eventClick",this,w,I)}).hover(function(I){f("eventMouseover",this,w,I)},function(I){f("eventMouseout",this,w,I)})}function u(w,p){la(w,p,"show")}function B(w,p){la(w,p,"hide")}function la(w,p,I){w=ba[w._id];var Y,ca=w.length;for(Y=0;Y<ca;Y++)if(!p||w[Y][0]!=p[0])w[Y][I]()}function ea(w,p,I,Y,ca,e,M){var A=
p.allDay,ha=p._id;T(v[ha],I,Y,ca);f("eventDrop",w,p,I,Y,ca,function(){T(v[ha],-I,-Y,A);ja(ha)},e,M);ja(ha)}function na(w,p,I,Y,ca,e){var M=p._id;N(v[M],I,Y);f("eventResize",w,p,I,Y,function(){N(v[M],-I,-Y);ja(M)},ca,e);ja(M)}function T(w,p,I,Y){I=I||0;for(var ca,e=w.length,M=0;M<e;M++){ca=w[M];if(Y!==sa)ca.allDay=Y;xa(ka(ca.start,p,true),I);if(ca.end)ca.end=xa(ka(ca.end,p,true),I);Z(ca,W)}}function N(w,p,I){I=I||0;for(var Y,ca=w.length,e=0;e<ca;e++){Y=w[e];Y.end=xa(ka(r(Y),p,true),I);Z(Y,W)}}var V=
this;V.element=a;V.calendar=b;V.name=g;V.opt=c;V.trigger=f;V.isEventDraggable=k;V.isEventResizable=q;V.reportEvents=d;V.eventEnd=r;V.reportEventElement=O;V.reportEventClear=L;V.eventElementHandlers=R;V.showEvents=u;V.hideEvents=B;V.eventDrop=ea;V.eventResize=na;var aa=V.defaultEventEnd,Z=b.normalizeEvent,ja=b.reportEventChange,v={},C=[],ba={},W=b.options}function wb(){function a(y,Q){var H=e(),P=v(),i=C(),F=0,ga,fa,ya=y.length,j,m,t,X,z=la("maxHeight");H[0].innerHTML=c(y);f(y,H.children());k(y);q(y,
H,Q);h(y);d(y);r(y);Q=O();for(H=0;H<P;H++){t=[];X={};ga=[];for(fa=0;fa<i;fa++){t[fa]=0;ga[fa]=0}for(;F<ya&&(j=y[F]).row==H;){fa=Kb(ga.slice(j.startCol,j.endCol));if(z&&fa+j.outerHeight>z)j.overflow=true;else{j.top=fa;fa+=j.outerHeight}for(m=j.startCol;m<j.endCol;m++){if(t[m])j.overflow=true;if(j.overflow){if(j.isStart&&!X[m])X[m]={seg:j,top:fa,date:G(j.start,true),count:0};X[m]&&X[m].count++;t[m]++}else ga[m]=fa}F++}Q[H].height(Kb(ga));b(X,Q[H])}R(y,L(Q))}function b(y,Q){for(var H=e(),P=C(),i,F,ga=
0;ga<P;ga++)if(F=y[ga])if(F.count>1){i=o("<a>").addClass("fc-more-link").html("+"+F.count).appendTo(H);i[0].style.position="absolute";i[0].style.left=F.seg.left+"px";i[0].style.top=F.top+Q[0].offsetTop+"px";F=ea("overflowRender",F,{count:F.count,date:F.date},i);F===false&&i.remove()}else{F.seg.top=F.top;F.seg.overflow=false}}function g(y,Q,H){var P=o("<div/>"),i=e(),F=y.length,ga;P[0].innerHTML=c(y);P=P.children();i.append(P);f(y,P);h(y);d(y);r(y);R(y,L(O()));P=[];for(i=0;i<F;i++)if(ga=y[i].element){y[i].row===
Q&&ga.css("top",H);P.push(ga[0])}return o(P)}function c(y){var Q=la("isRTL"),H,P=y.length,i,F,ga,fa;H=W();var ya=H.left,j=H.right,m,t,X,z,l,s="";for(H=0;H<P;H++){i=y[H];F=i.event;fa=["fc-event","fc-event-skin","fc-event-hori"];na(F)&&fa.push("fc-event-draggable");if(Q){i.isStart&&fa.push("fc-corner-right");i.isEnd&&fa.push("fc-corner-left");m=I(i.end.getDay()-1);t=I(i.start.getDay());X=i.isEnd?w(m):ya;z=i.isStart?p(t):j}else{i.isStart&&fa.push("fc-corner-left");i.isEnd&&fa.push("fc-corner-right");
m=I(i.start.getDay());t=I(i.end.getDay()-1);X=i.isStart?w(m):ya;z=i.isEnd?p(t):j}fa=fa.concat(F.className);if(F.source)fa=fa.concat(F.source.className||[]);ga=F.url;l=cb(F,la);s+=ga?"<a href='"+Ea(ga)+"'":"<div";s+=" class='"+fa.join(" ")+"' style='position:absolute;z-index:8;left:"+X+"px;"+l+"'><div class='fc-event-inner fc-event-skin'"+(l?" style='"+l+"'":"")+">";if(!F.allDay&&i.isStart)s+="<span class='fc-event-time'>"+Ea(A(F.start,F.end,la("timeFormat")))+"</span>";s+="<span class='fc-event-title'>"+
Ea(F.title)+"</span></div>";if(i.isEnd&&T(F))s+="<div class='ui-resizable-handle ui-resizable-"+(Q?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>";s+="</"+(ga?"a":"div")+">";i.left=X;i.outerWidth=z-X;i.startCol=m;i.endCol=t+1}return s}function f(y,Q){var H,P=y.length,i,F,ga;for(H=0;H<P;H++){i=y[H];F=i.event;ga=o(Q[H]);F=ea("eventRender",F,F,ga);if(F===false)ga.remove();else{if(F&&F!==true){F=o(F).css({position:"absolute",left:i.left});ga.replaceWith(F);ga=F}i.element=ga}}}function k(y){var Q,H=y.length,P,i;
for(Q=0;Q<H;Q++){P=y[Q];(i=P.element)&&V(P.event,i)}}function q(y,Q,H){var P,i=y.length,F,ga,fa;for(P=0;P<i;P++){F=y[P];if(ga=F.element){fa=F.event;if(fa._id===H)M(fa,ga,F);else ga[0]._fci=P}}Gb(Q,y,M)}function h(y){var Q,H=y.length,P,i,F,ga,fa={};for(Q=0;Q<H;Q++){P=y[Q];if(i=P.element){F=P.key=Lb(i[0]);ga=fa[F];if(ga===sa)ga=fa[F]=sb(i,true);P.hsides=ga}}}function d(y){var Q,H=y.length,P,i;for(Q=0;Q<H;Q++){P=y[Q];if(i=P.element)i[0].style.width=Math.max(0,P.outerWidth-P.hsides)+"px"}}function r(y){var Q,
H=y.length,P,i,F,ga,fa={};for(Q=0;Q<H;Q++){P=y[Q];if(i=P.element){F=P.key;ga=fa[F];if(ga===sa)ga=fa[F]=Ib(i);P.outerHeight=i[0].offsetHeight+ga}else P.outerHeight=0}}function O(){var y,Q=v(),H=[];for(y=0;y<Q;y++)H[y]=ba(y).find("td:first div.fc-day-content > div");return H}function L(y){var Q,H=y.length,P=[];for(Q=0;Q<H;Q++)P[Q]=y[Q][0].offsetTop;return P}function R(y,Q){var H,P=y.length,i,F;for(H=0;H<P;H++){i=y[H];if((F=i.element)&&!i.overflow){F[0].style.top=Q[i.row]+(i.top||0)+"px";i=i.event;ea("eventAfterRender",
i,i,F)}else F&&F.hide()}}function u(y,Q,H){var P=la("isRTL"),i=P?"w":"e",F=Q.find("div.ui-resizable-"+i),ga=false;tb(Q);Q.mousedown(function(fa){fa.preventDefault()}).click(function(fa){if(ga){fa.preventDefault();fa.stopImmediatePropagation()}});F.mousedown(function(fa){function ya(qa){ea("eventResizeStop",this,y,qa);o("body").css("cursor","");j.stop();E();s&&ja(this,y,s,0,qa);setTimeout(function(){ga=false},0)}if(fa.which==1){ga=true;var j=B.getHoverListener(),m=v(),t=C(),X=P?-1:1,z=P?t-1:0,l=Q.css("top"),
s,da,pa=o.extend({},y),ra=Y(y.start);ma();o("body").css("cursor",i+"-resize").one("mouseup",ya);ea("eventResizeStart",this,y,fa);j.start(function(qa,ua){if(qa){var x=Math.max(ra.row,qa.row);qa=qa.col;if(m==1)x=0;if(x==ra.row)qa=P?Math.min(ra.col,qa):Math.max(ra.col,qa);s=x*7+qa*X+z-(ua.row*7+ua.col*X+z);ua=ka(N(y),s,true);if(s){pa.end=ua;x=da;da=g(ca([pa]),H.row,l);da.find("*").css("cursor",i+"-resize");x&&x.remove();Z(y)}else if(da){aa(y);da.remove();da=null}E();ha(y.start,ka(G(ua),1))}},fa)}})}
var B=this;B.renderDaySegs=a;B.resizableDayEvent=u;var la=B.opt,ea=B.trigger,na=B.isEventDraggable,T=B.isEventResizable,N=B.eventEnd,V=B.reportEventElement,aa=B.showEvents,Z=B.hideEvents,ja=B.eventResize,v=B.getRowCnt,C=B.getColCnt,ba=B.allDayRow,W=B.allDayBounds,w=B.colContentLeft,p=B.colContentRight,I=B.dayOfWeekCol,Y=B.dateCell,ca=B.compileDaySegs,e=B.getDaySegmentContainer,M=B.bindDaySeg,A=B.calendar.formatDates,ha=B.renderDayOverlay,E=B.clearOverlays,ma=B.clearSelection}function Ob(){function a(L,
R,u){b();R||(R=h(L,u));d(L,R,u);g(L,R,u)}function b(L){if(O){O=false;r();q("unselect",null,L)}}function g(L,R,u,B){O=true;q("select",null,L,R,u,B)}function c(L){var R=f.cellDate,u=f.cellIsAllDay,B=f.getHoverListener(),la=f.reportDayClick;if(L.which==1&&k("selectable")){b(L);var ea;B.start(function(na,T){r();if(na&&u(na)){ea=[R(T),R(na)].sort(Jb);d(ea[0],ea[1],true)}else ea=null},L);o(document).one("mouseup",function(na){B.stop();if(ea){+ea[0]==+ea[1]&&la(ea[0],true,na);g(ea[0],ea[1],true,na)}})}}
var f=this;f.select=a;f.unselect=b;f.reportSelection=g;f.daySelectionMousedown=c;var k=f.opt,q=f.trigger,h=f.defaultSelectionEnd,d=f.renderSelection,r=f.clearSelection,O=false;k("selectable")&&k("unselectAuto")&&o(document).mousedown(function(L){var R=k("unselectCancel");if(R)if(o(L.target).parents(R).length)return;b(L)})}function Nb(){function a(k,q){var h=f.shift();h||(h=o("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));h[0].parentNode!=q[0]&&h.appendTo(q);c.push(h.css(k).show());
return h}function b(){for(var k;k=c.shift();)f.push(k.hide().unbind())}var g=this;g.renderOverlay=a;g.clearOverlays=b;var c=[],f=[]}function Pb(a){var b=this,g,c;b.build=function(){g=[];c=[];a(g,c)};b.cell=function(f,k){var q=g.length,h=c.length,d,r=-1,O=-1;for(d=0;d<q;d++)if(k>=g[d][0]&&k<g[d][1]){r=d;break}for(d=0;d<h;d++)if(f>=c[d][0]&&f<c[d][1]){O=d;break}return r>=0&&O>=0?{row:r,col:O}:null};b.rect=function(f,k,q,h,d){d=d.offset();return{top:g[f][0]-d.top,left:c[k][0]-d.left,width:c[h][1]-c[k][0],
height:g[q][1]-g[f][0]}}}function Qb(a){function b(h){yc(h);h=a.cell(h.pageX,h.pageY);if(!h!=!q||h&&(h.row!=q.row||h.col!=q.col)){if(h){k||(k=h);f(h,k,h.row-k.row,h.col-k.col)}else f(h,k);q=h}}var g=this,c,f,k,q;g.start=function(h,d,r){f=h;k=q=null;a.build();b(d);c=r||"mousemove";o(document).bind(c,b)};g.stop=function(){o(document).unbind(c,b);return q}}function yc(a){if(a.pageX===sa){a.pageX=a.originalEvent.pageX;a.pageY=a.originalEvent.pageY}}function Rb(a){function b(q){return c[q]=c[q]||a(q)}
var g=this,c={},f={},k={};g.left=function(q){return f[q]=f[q]===sa?b(q).position().left:f[q]};g.right=function(q){return k[q]=k[q]===sa?g.left(q)+b(q).width():k[q]};g.clear=function(){c={};f={};k={}}}function Zb(){function a(){L();B().empty()}function b(T,N){T.sort(c);O(T);f(g(T),N)}function g(T){var N=[],V=d("titleFormat","day"),aa=d("firstDay"),Z=d("listSections"),ja,v,C,ba,W,w,p,I=-1,Y=Ia(new Date),ca=ka(G(Y),-((Y.getDay()-aa+7)%7));for(ja=0;ja<T.length;ja++){aa=T[ja];if(!(aa.end<h.start||aa.start>
h.visEnd)){p=G(aa.start<h.start&&aa.end>h.start?h.start:aa.start,true);v=Ba(p,Y);C=Math.floor(Ba(p,ca)/7);ba=p.getMonth()+(p.getYear()-Y.getYear())*12-Y.getMonth();if(Z=="smart")if(v<0)W=d("listTexts","past");else if(v==0)W=d("listTexts","today");else if(v==1)W=d("listTexts","tomorrow");else if(C==0)W=d("listTexts","thisWeek");else if(C==1)W=d("listTexts","nextWeek");else if(ba==0)W=d("listTexts","thisMonth");else if(ba==1)W=d("listTexts","nextMonth");else{if(ba>1)W=d("listTexts","future")}else W=
Z=="month"?ea(p,"MMMM yyyy"):Z=="week"?d("listTexts","week")+ea(p," W"):Z=="day"?ea(p,V):"";if(W!=w){N[++I]={events:[],start:p,title:W,daydiff:v,weekdiff:C,monthdiff:ba};w=W}N[I].events.push(aa)}}return N}function c(T,N){var V=T.start.getTime()-N.start.getTime();return V+(V?0:T.end.getTime()-N.end.getTime())}function f(T,N){var V=d("theme")?"ui":"fc",aa=V+"-widget-header";V=V+"-widget-content";var Z,ja,v,C,ba,W,w,p,I;for(ja=0;ja<T.length;ja++){v=T[ja];v.title&&o('<div class="fc-list-header '+aa+'">'+
Ea(v.title)+"</div>").appendTo(B());I=o("<div>").addClass("fc-list-section "+V).appendTo(B());W="";for(Z=0;Z<v.events.length;Z++){C=v.events[Z];ba=k(C,v);w=(w=cb(C,d))?" style='"+w+"'":"";p=["fc-event","fc-event-skin","fc-event-vert","fc-corner-top","fc-corner-bottom"].concat(C.className);if(C.source&&C.source.className)p=p.concat(C.source.className);W+="<div class='"+p.join(" ")+"'"+w+"><div class='fc-event-inner fc-event-skin'"+w+"><div class='fc-event-head fc-event-skin'"+w+"><div class='fc-event-time'>"+
(ba[0]?'<span class="fc-col-date">'+ba[0]+"</span> ":"")+(ba[1]?'<span class="fc-col-time">'+ba[1]+"</span>":"")+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+Ea(C.title)+"</div></div><div class='fc-event-bg'></div></div></div>"}I[0].innerHTML=W;W=I.children();for(Z=0;Z<v.events.length;Z++){C=v.events[Z];ba=o(W[Z]);w=r("eventRender",C,C,ba);if(w===false)ba.remove();else{if(w&&w!==true){ba.remove();ba=o(w).appendTo(I)}if(C._id===N)u(C,ba,v);else ba[0]._fci=Z;R(C,ba)}}q(I,
v,u)}Sa(B())}function k(T,N){var V=d("timeFormat"),aa=d("columnFormat"),Z=d("listSections"),ja=T.end.getTime()-T.start.getTime(),v="",C="";if(Z=="smart")if(T.start<N.start)v=d("listTexts","until")+" "+ea(T.end,T.allDay||T.end.getDate()!=N.start.getDate()?aa:V);else if(ja>Qa)v=na(T.start,T.end,aa+"{ - "+aa+"}");else if(N.daydiff==0)v=d("listTexts","today");else if(N.daydiff==1)v=d("listTexts","tomorrow");else if(N.weekdiff==0||N.weekdiff==1)v=ea(T.start,"dddd");else{if(N.daydiff>1||N.daydiff<0)v=ea(T.start,
aa)}else if(Z!="day")v=na(T.start,T.end,aa+(ja>Qa?"{ - "+aa+"}":""));if(!v&&T.allDay)C=d("allDayText");else if((ja<Qa||!v)&&!T.allDay)C=na(T.start,T.end,V);return[v,C]}function q(T,N,V){T.unbind("mouseover").mouseover(function(aa){for(var Z=aa.target,ja=Z;Z!=this;){ja=Z;Z=Z.parentNode}if((Z=ja._fci)!==sa){ja._fci=sa;ja=N.events[Z];V(ja,T.children().eq(Z),N);o(aa.target).trigger(aa)}aa.stopPropagation()})}var h=this;h.renderEvents=b;h.renderEventTime=k;h.compileDaySegs=g;h.clearEvents=a;h.lazySegBind=
q;h.sortCmp=c;wb.call(h);var d=h.opt,r=h.trigger,O=h.reportEvents,L=h.reportEventClear,R=h.reportEventElement,u=h.eventElementHandlers,B=h.getDaySegmentContainer,la=h.calendar,ea=la.formatDate,na=la.formatDates}function zc(a,b){function g(na,T){T&&ka(na,r("listPage")*T);d.start=d.visStart=G(na,true);d.end=ka(G(d.start),r("listPage"));d.visEnd=ka(G(d.start),r("listRange"));xa(d.visEnd,-1);d.title=L(na,d.visEnd,r("titleFormat"));c();R?O():f()}function c(){u=r("firstDay");B=r("weekends")?0:1;la=r("theme")?
"ui":"fc";ea=r("columnFormat","day")}function f(){R=o("<div>").addClass("fc-list-content").appendTo(a)}function k(na){r("listNoHeight")||R.css("height",na-1+"px").css("overflow","auto")}function q(){}function h(){}var d=this;d.render=g;d.select=h;d.unselect=h;d.getDaySegmentContainer=function(){return R};db.call(d,a,b,"list");Zb.call(d);var r=d.opt,O=d.clearEvents,L=b.formatDates;d.setWidth=q;d.setHeight=k;var R,u,B,la,ea}function Ac(){function a(){r();u().children("tbody").remove()}function b(la,
ea){la.sort(k);d(la);g(h(la),ea);u().removeClass("fc-list-smart fc-list-day fc-list-month fc-list-week").addClass("fc-list-"+f("listSections"))}function g(la,ea){var na=f("theme")?"ui":"fc",T=u(),N=na+"-widget-header";na=na+"-widget-content";var V=f("tableCols"),aa=o.inArray("time",V)>=0,Z,ja,v,C,ba,W,w,p,I,Y;for(ja=0;ja<la.length;ja++){v=la[ja];v.title&&o('<tbody class="fc-list-header"><tr><td class="fc-list-header '+N+'" colspan="'+V.length+'">'+Ea(v.title)+"</td></tr></tbody>").appendTo(T);Y=o("<tbody>").addClass("fc-list-section "+
na).appendTo(T);W="";for(Z=0;Z<v.events.length;Z++){C=v.events[Z];ba=R(C,v);w=(w=cb(C,f))?" style='"+w+"'":"";p=["fc-event-skin","fc-corner-left","fc-corner-right","fc-corner-top","fc-corner-bottom"].concat(C.className);if(C.source&&C.source.className)p=p.concat(C.source.className);I=["fc-event","fc-event-row","fc-"+Mb[C.start.getDay()]];v.daydiff==0&&I.push("fc-today");W+="<tr class='"+I.join(" ")+"'>";for(var ca=0;ca<V.length;ca++){I=V[ca];if(I=="handle")W+="<td class='fc-event-handle'><div class='"+
p.join(" ")+"'"+w+"><span class='fc-event-inner'></span></div></td>";else if(I=="date")W+="<td class='fc-event-date' colspan='"+(ba[1]||!aa?1:2)+"'>"+Ea(ba[0])+"</td>";else if(I=="time"){if(ba[1])W+="<td class='fc-event-time'>"+Ea(ba[1])+"</td>"}else W+="<td class='fc-event-"+I+"'>"+(C[I]?Ea(C[I]):"&nbsp;")+"</td>"}W+="</tr>";if(document.all){o(W).appendTo(Y);W=""}}if(!document.all)Y[0].innerHTML=W;ba=Y.children();for(Z=0;Z<v.events.length;Z++){C=v.events[Z];W=o(ba[Z]);w=q("eventRender",C,C,W);if(w===
false)W.remove();else{if(w&&w!==true){W.remove();W=o(w).appendTo(Y)}if(C._id===ea)L(C,W,v);else W[0]._fci=Z;O(C,W)}}B(Y,v,L);Sa(Y)}}var c=this;Zb.call(c);var f=c.opt,k=c.sortCmp,q=c.trigger,h=c.compileDaySegs,d=c.reportEvents,r=c.reportEventClear,O=c.reportEventElement,L=c.eventElementHandlers,R=c.renderEventTime,u=c.getDaySegmentContainer,B=c.lazySegBind;c.renderEvents=b;c.clearEvents=a}function Bc(a,b){function g(N,V){V&&ka(N,r("listPage")*V);d.start=d.visStart=G(N,true);d.end=ka(G(d.start),r("listPage"));
d.visEnd=ka(G(d.start),r("listRange"));xa(d.visEnd,-1);d.title=d.visEnd.getTime()-d.visStart.getTime()<Qa?R(N,r("titleFormat")):L(N,d.visEnd,r("titleFormat"));c();B?O():f()}function c(){la=r("firstDay");ea=r("weekends")?0:1;na=r("theme")?"ui":"fc";T=r("columnFormat")}function f(){for(var N=r("tableCols"),V="<table class='fc-border-separate' style='width:100%' cellspacing='0'><colgroup>",aa=0;aa<N.length;aa++)V+="<col class='fc-event-"+N[aa]+"' />";V+="</colgroup></table>";u=o("<div>").addClass("fc-list-content").appendTo(a);
B=o(V).appendTo(u)}function k(N){r("listNoHeight")||u.css("height",N-1+"px").css("overflow","auto")}function q(){}function h(){}var d=this;d.render=g;d.select=h;d.unselect=h;d.getDaySegmentContainer=function(){return B};db.call(d,a,b,"table");Ac.call(d);var r=d.opt,O=d.clearEvents,L=b.formatDates,R=b.formatDate;d.setWidth=q;d.setHeight=k;var u,B,la,ea,na,T}var $a={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,currentTimeIndicator:false,
allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy",list:"MMM d, yyyy",table:"MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d",list:"dddd, MMM d, yyyy",table:"MMM d, yyyy"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],
monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day",list:"list",table:"table"},listTexts:{until:"until",past:"Past events",today:"Today",tomorrow:"Tomorrow",
thisWeek:"This week",nextWeek:"Next week",thisMonth:"This month",nextMonth:"Next month",future:"Future events",week:"W"},listSections:"month",listRange:30,listPage:7,tableCols:["handle","date","time","title"],theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Cc={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},
buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Aa=o.fullCalendar={version:"1.5.3-rcube-0.7.1"},Ha=Aa.views={};o.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,1),g;this.each(function(){var f=o.data(this,"fullCalendar");if(f&&o.isFunction(f[a])){f=f[a].apply(f,b);if(g===sa)g=f;a=="destroy"&&o.removeData(this,"fullCalendar")}});if(g!==sa)return g;return this}var c=a.eventSources||[];delete a.eventSources;if(a.events){c.push(a.events);
delete a.events}a=o.extend(true,{},$a,a.isRTL||a.isRTL===sa&&$a.isRTL?Cc:{},a);this.each(function(f,k){f=o(k);k=new $b(f,a,c);f.data("fullCalendar",k);k.render()});return this};Aa.sourceNormalizers=[];Aa.sourceFetchers=[];var cc={dataType:"json",cache:false},dc=1;Aa.addDays=ka;Aa.cloneDate=G;Aa.parseDate=nb;Aa.parseISO8601=Eb;Aa.parseTime=pb;Aa.formatDate=Pa;Aa.formatDates=lb;var Mb=["sun","mon","tue","wed","thu","fri","sat"],Qa=864E5,ec=36E5,xc=6E4,fc={s:function(a){return a.getSeconds()},ss:function(a){return Ra(a.getSeconds())},
m:function(a){return a.getMinutes()},mm:function(a){return Ra(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Ra(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Ra(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Ra(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Ra(a.getMonth()+1)},MMM:function(a,
b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return Pa(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st",
"nd","rd"][a%10-1]||"th"},W:function(a){return Dc(a)}},Dc=function(a){a=G(a);a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1};Aa.applyAll=bb;Ha.month=nc;Ha.basicWeek=oc;Ha.basicDay=pc;Ab({weekMode:"fixed"});Ha.agendaWeek=rc;Ha.agendaDay=sc;Ab({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,
maxTime:24});Ha.list=zc;Ha.table=Bc})(jQuery);
/**
 * Copyright (c) 2009 Sergiy Kovalchuk (serg472@gmail.com)
 * 
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *  
 * Following code is based on Element.mask() implementation from ExtJS framework (http://extjs.com/)
 *
 */
(function(a){a.fn.mask=function(c,b){a(this).each(function(){if(b!==undefined&&b>0){var d=a(this);d.data("_mask_timeout",setTimeout(function(){a.maskElement(d,c)},b))}else{a.maskElement(a(this),c)}})};a.fn.unmask=function(){a(this).each(function(){a.unmaskElement(a(this))})};a.fn.isMasked=function(){return this.hasClass("masked")};a.maskElement=function(d,c){if(d.data("_mask_timeout")!==undefined){clearTimeout(d.data("_mask_timeout"));d.removeData("_mask_timeout")}if(d.isMasked()){a.unmaskElement(d)}if(d.css("position")=="static"){d.addClass("masked-relative")}d.addClass("masked");var e=a('<div class="loadmask"></div>');if(navigator.userAgent.toLowerCase().indexOf("msie")>-1){e.height(d.height()+parseInt(d.css("padding-top"))+parseInt(d.css("padding-bottom")));e.width(d.width()+parseInt(d.css("padding-left"))+parseInt(d.css("padding-right")))}if(navigator.userAgent.toLowerCase().indexOf("msie 6")>-1){d.find("select").addClass("masked-hidden")}d.append(e);if(c!==undefined){var b=a('<div class="loadmask-msg" style="display:none;"></div>');b.append("<div>"+c+"</div>");d.append(b);b.css("top",Math.round(d.height()/2-(b.height()-parseInt(b.css("padding-top"))-parseInt(b.css("padding-bottom")))/2)+"px");b.css("left",Math.round(d.width()/2-(b.width()-parseInt(b.css("padding-left"))-parseInt(b.css("padding-right")))/2)+"px");b.show()}};a.unmaskElement=function(b){if(b.data("_mask_timeout")!==undefined){clearTimeout(b.data("_mask_timeout"));b.removeData("_mask_timeout")}b.find(".loadmask-msg,.loadmask").remove();b.removeClass("masked");b.removeClass("masked-relative");b.find("select").removeClass("masked-hidden")}})(jQuery);(function(a){a.fn.colorPicker=function(){this.length>0&&buildSelector();return this.each(function(){buildPicker(this)})};var c,d=false;buildPicker=function(b){control=a("<div class='color_picker'>&nbsp;</div>");control.css("background-color",a(b).val());control.bind("click",toggleSelector);a(b).after(control);a(b).bind("change",function(){selectedValue=toHex(a(b).val());a(b).next(".color_picker").css("background-color",selectedValue)});a(b).hide()};buildSelector=function(){selector=a("<div id='color_selector'></div>");
a.each(a.fn.colorPicker.defaultColors,function(){swatch=a("<div class='color_swatch'>&nbsp;</div>");swatch.css("background-color","#"+this);swatch.bind("click",function(){changeColor(a(this).css("background-color"))});swatch.bind("mouseover",function(){a(this).css("border-color","#598FEF");a("input#color_value").val(toHex(a(this).css("background-color")))});swatch.bind("mouseout",function(){a(this).css("border-color","#000");a("input#color_value").val(toHex(a(c).css("background-color")))});swatch.appendTo(selector)});
hex_field=a("<label for='color_value'>Hex</label><input type='text' size='8' id='color_value'/>");hex_field.bind("keydown",function(b){b.keyCode==13&&changeColor(a(this).val());b.keyCode==27&&toggleSelector()});a("<div id='color_custom'></div>").append(hex_field).appendTo(selector);a("body").append(selector);selector.hide()};checkMouse=function(b){var e=a(b.target).parents("div#color_selector").length;b.target==a("div#color_selector")[0]||b.target==c||e>0||hideSelector()};hideSelector=function(){var b=
a("div#color_selector");a(document).unbind("mousedown",checkMouse);b.hide();d=false};showSelector=function(){var b=a("div#color_selector");b.css({top:a(c).offset().top+a(c).outerHeight(),left:a(c).offset().left});hexColor=a(c).prev("input").val();a("input#color_value").val(hexColor);b.show();a(document).bind("mousedown",checkMouse);d=true};toggleSelector=function(){c=this;d?hideSelector():showSelector()};changeColor=function(b){if(selectedValue=toHex(b))a(c).css("background-color",selectedValue),
a(c).prev("input").val(selectedValue).change(),hideSelector()};toHex=function(a){if(a.match(/[0-9a-fA-F]{3}$/)||a.match(/[0-9a-fA-F]{6}$/))a=a.charAt(0)=="#"?a:"#"+a;else if(a.match(/^rgb\(([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5]),[ ]{0,1}([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5]),[ ]{0,1}([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5])\)$/)){var c=[parseInt(RegExp.$1),parseInt(RegExp.$2),parseInt(RegExp.$3)],d=function(a){if(a.length<2)for(var b=0,c=2-a.length;b<
c;b++)a="0"+a;return a};if(c.length==3)var a=d(c[0].toString(16)),f=d(c[1].toString(16)),c=d(c[2].toString(16)),a="#"+a+f+c}else a=false;return a};a.fn.colorPicker.addColors=function(b){a.fn.colorPicker.defaultColors=a.fn.colorPicker.defaultColors.concat(b)};a.fn.colorPicker.defaultColors="000000,993300,333300,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFFF,99CCFF,FFFFFF".split(",")})(jQuery);
/*
* qTip2 - Pretty powerful tooltips
* http://craigsworks.com/projects/qtip2/
*
* Version: 2.0.0pre
* Copyright 2009-2010 Craig Michael Thompson - http://craigsworks.com
*
* Dual licensed under MIT or GPLv2 licenses
*   http://en.wikipedia.org/wiki/MIT_License
*   http://en.wikipedia.org/wiki/GNU_General_Public_License
*
* Date: Sun May 13 20:10:51 2012 +0100
*//*jslint browser: true, onevar: true, undef: true, nomen: true, bitwise: true, regexp: true, newcap: true, immed: true, strict: true *//*global window: false, jQuery: false, console: false, define: false */// Uses AMD or browser globals to create a jQuery plugin.
(function(a){typeof define=="function"&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){"use strict";function v(){v.history=v.history||[],v.history.push(arguments);if("object"==typeof console){var a=console[console.warn?"warn":"log"],b=Array.prototype.slice.call(arguments),c;typeof arguments[0]=="string"&&(b[0]="qTip2: "+b[0]),c=a.apply?a.apply(console,b):a(b)}}function w(b){var e;if(!b||"object"!=typeof b)return c;if(b.metadata===d||"object"!=typeof b.metadata)b.metadata={type:b.metadata};if("content"in b){if(b.content===d||"object"!=typeof b.content||b.content.jquery)b.content={text:b.content};e=b.content.text||c,!a.isFunction(e)&&(!e&&!e.attr||e.length<1||"object"==typeof e&&!e.jquery)&&(b.content.text=c);if("title"in b.content){if(b.content.title===d||"object"!=typeof b.content.title)b.content.title={text:b.content.title};e=b.content.title.text||c,!a.isFunction(e)&&(!e&&!e.attr||e.length<1||"object"==typeof e&&!e.jquery)&&(b.content.title.text=c)}}return"position"in b&&(b.position===d||"object"!=typeof b.position)&&(b.position={my:b.position,at:b.position}),"show"in b&&(b.show===d||"object"!=typeof b.show)&&(b.show.jquery?b.show={target:b.show}:b.show={event:b.show}),"hide"in b&&(b.hide===d||"object"!=typeof b.hide)&&(b.hide.jquery?b.hide={target:b.hide}:b.hide={event:b.hide}),"style"in b&&(b.style===d||"object"!=typeof b.style)&&(b.style={classes:b.style}),a.each(g,function(){this.sanitize&&this.sanitize(b)}),b}function x(r,s,v,x){function H(a){var b=0,c,d=s,e=a.split(".");while(d=d[e[b++]])b<e.length&&(c=d);return[c||s,e.pop()]}function I(){var a=s.style.widget;D.toggleClass(k,a).toggleClass(n,s.style.def&&!a),F.content.toggleClass(k+"-content",a),F.titlebar&&F.titlebar.toggleClass(k+"-header",a),F.button&&F.button.toggleClass(j+"-icon",!a)}function J(a){F.title&&(F.titlebar.remove(),F.titlebar=F.title=F.button=d,a!==c&&y.reposition())}function K(){var b=s.content.title.button,d=typeof b=="string",e=d?b:"Close tooltip";F.button&&F.button.remove(),b.jquery?F.button=b:F.button=a("<a />",{"class":"ui-state-default ui-tooltip-close "+(s.style.widget?"":j+"-icon"),title:e,"aria-label":e}).prepend(a("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),F.button.appendTo(F.titlebar).attr("role","button").click(function(a){return D.hasClass(l)||y.hide(a),c}),y.redraw()}function L(){var c=A+"-title";F.titlebar&&J(),F.titlebar=a("<div />",{"class":j+"-titlebar "+(s.style.widget?"ui-widget-header":"")}).append(F.title=a("<div />",{id:c,"class":j+"-title","aria-atomic":b})).insertBefore(F.content).delegate(".ui-tooltip-close","mousedown keydown mouseup keyup mouseout",function(b){a(this).toggleClass("ui-state-active ui-state-focus",b.type.substr(-4)==="down")}).delegate(".ui-tooltip-close","mouseover mouseout",function(b){a(this).toggleClass("ui-state-hover",b.type==="mouseover")}),s.content.title.button?K():y.rendered&&y.redraw()}function M(a){var b=F.button,d=F.title;if(!y.rendered)return c;a?(d||L(),K()):b.remove()}function N(b,d){var e=F.title;if(!y.rendered||!b)return c;a.isFunction(b)&&(b=b.call(r,G.event,y));if(b===c||!b&&b!=="")return J(c);b.jquery&&b.length>0?e.empty().append(b.css({display:"block"})):e.html(b),y.redraw(),d!==c&&y.rendered&&D[0].offsetWidth>0&&y.reposition(G.event)}function O(b,d){function g(b){function i(e){e&&(delete h[e.src],clearTimeout(y.timers.img[e.src]),a(e).unbind(E)),a.isEmptyObject(h)&&(y.redraw(),d!==c&&y.reposition(G.event),b())}var g,h={};if((g=f.find("img[src]:not([height]):not([width])")).length===0)return i();g.each(function(b,c){if(h[c.src]!==e)return;var d=0,f=3;(function g(){if(c.height||c.width||d>f)return i(c);d+=1,y.timers.img[c.src]=setTimeout(g,700)})(),a(c).bind("error"+E+" load"+E,function(){i(this)}),h[c.src]=c})}var f=F.content;return!y.rendered||!b?c:(a.isFunction(b)&&(b=b.call(r,G.event,y)||""),b.jquery&&b.length>0?f.empty().append(b.css({display:"block"})):f.html(b),y.rendered<0?D.queue("fx",g):(C=0,g(a.noop)),y)}function P(){function j(a){if(D.hasClass(l))return c;clearTimeout(y.timers.show),clearTimeout(y.timers.hide);var d=function(){y.toggle(b,a)};s.show.delay>0?y.timers.show=setTimeout(d,s.show.delay):d()}function k(b){if(D.hasClass(l)||B||C)return c;var f=a(b.relatedTarget||b.target),g=f.closest(m)[0]===D[0],h=f[0]===e.show[0];clearTimeout(y.timers.show),clearTimeout(y.timers.hide);if(d.target==="mouse"&&g||s.hide.fixed&&/mouse(out|leave|move)/.test(b.type)&&(g||h)){try{b.preventDefault(),b.stopImmediatePropagation()}catch(i){}return}s.hide.delay>0?y.timers.hide=setTimeout(function(){y.hide(b)},s.hide.delay):y.hide(b)}function n(a){if(D.hasClass(l))return c;clearTimeout(y.timers.inactive),y.timers.inactive=setTimeout(function(){y.hide(a)},s.hide.inactive)}function o(a){y.rendered&&D[0].offsetWidth>0&&y.reposition(a)}var d=s.position,e={show:s.show.target,hide:s.hide.target,viewport:a(d.viewport),document:a(document),body:a(document.body),window:a(window)},g={show:a.trim(""+s.show.event).split(" "),hide:a.trim(""+s.hide.event).split(" ")},i=a.browser.msie&&parseInt(a.browser.version,10)===6;D.bind("mouseenter"+E+" mouseleave"+E,function(a){var b=a.type==="mouseenter";b&&y.focus(a),D.toggleClass(p,b)}),s.hide.fixed&&(e.hide=e.hide.add(D),D.bind("mouseover"+E,function(){D.hasClass(l)||clearTimeout(y.timers.hide)})),/mouse(out|leave)/i.test(s.hide.event)?s.hide.leave==="window"&&e.window.bind("mouseout"+E+" blur"+E,function(a){/select|option/.test(a.target)&&!a.relatedTarget&&y.hide(a)}):/mouse(over|enter)/i.test(s.show.event)&&e.hide.bind("mouseleave"+E,function(a){clearTimeout(y.timers.show)}),(""+s.hide.event).indexOf("unfocus")>-1&&d.container.closest("html").bind("mousedown"+E,function(b){var c=a(b.target),d=y.rendered&&!D.hasClass(l)&&D[0].offsetWidth>0,e=c.parents(m).filter(D[0]).length>0;c[0]!==r[0]&&c[0]!==D[0]&&!e&&!r.has(c[0]).length&&!c.attr("disabled")&&y.hide(b)}),"number"==typeof s.hide.inactive&&(e.show.bind("qtip-"+v+"-inactive",n),a.each(f.inactiveEvents,function(a,b){e.hide.add(F.tooltip).bind(b+E+"-inactive",n)})),a.each(g.hide,function(b,c){var d=a.inArray(c,g.show),f=a(e.hide);d>-1&&f.add(e.show).length===f.length||c==="unfocus"?(e.show.bind(c+E,function(a){D[0].offsetWidth>0?k(a):j(a)}),delete g.show[d]):e.hide.bind(c+E,k)}),a.each(g.show,function(a,b){e.show.bind(b+E,j)}),"number"==typeof s.hide.distance&&e.show.add(D).bind("mousemove"+E,function(a){var b=G.origin||{},c=s.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&y.hide(a)}),d.target==="mouse"&&(e.show.bind("mousemove"+E,function(a){h={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),d.adjust.mouse&&(s.hide.event&&(D.bind("mouseleave"+E,function(a){(a.relatedTarget||a.target)!==e.show[0]&&y.hide(a)}),F.target.bind("mouseenter"+E+" mouseleave"+E,function(a){G.onTarget=a.type==="mouseenter"})),e.document.bind("mousemove"+E,function(a){y.rendered&&G.onTarget&&!D.hasClass(l)&&D[0].offsetWidth>0&&y.reposition(a||h)}))),(d.adjust.resize||e.viewport.length)&&(a.event.special.resize?e.viewport:e.window).bind("resize"+E,o),(e.viewport.length||i&&D.css("position")==="fixed")&&e.viewport.bind("scroll"+E,o)}function Q(){var b=[s.show.target[0],s.hide.target[0],y.rendered&&F.tooltip[0],s.position.container[0],s.position.viewport[0],window,document];y.rendered?a([]).pushStack(a.grep(b,function(a){return typeof a=="object"})).unbind(E):s.show.target.unbind(E+"-create")}var y=this,z=document.body,A=j+"-"+v,B=0,C=0,D=a(),E=".qtip-"+v,F,G;y.id=v,y.rendered=c,y.destroyed=c,y.elements=F={target:r},y.timers={img:{}},y.options=s,y.checks={},y.plugins={},y.cache=G={event:{},target:a(),disabled:c,attr:x,onTarget:c},y.checks.builtin={"^id$":function(d,e,g){var h=g===b?f.nextid:g,i=j+"-"+h;h!==c&&h.length>0&&!a("#"+i).length&&(D[0].id=i,F.content[0].id=i+"-content",F.title[0].id=i+"-title")},"^content.text$":function(a,b,c){O(c)},"^content.title.text$":function(a,b,c){if(!c)return J();!F.title&&c&&L(),N(c)},"^content.title.button$":function(a,b,c){M(c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(a[b]=new g.Corner(c))},"^position.container$":function(a,b,c){y.rendered&&D.appendTo(c)},"^show.ready$":function(){y.rendered?y.toggle(b):y.render(1)},"^style.classes$":function(a,b,c){D.attr("class",j+" qtip ui-helper-reset "+c)},"^style.widget|content.title":I,"^events.(render|show|move|hide|focus|blur)$":function(b,c,d){D[(a.isFunction(d)?"":"un")+"bind"]("tooltip"+c,d)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var a=s.position;D.attr("tracking",a.target==="mouse"&&a.adjust.mouse),Q(),P()}},a.extend(y,{render:function(d){if(y.rendered)return y;var e=s.content.text,f=s.content.title.text,h=s.position,i=a.Event("tooltiprender");return a.attr(r[0],"aria-describedby",A),D=F.tooltip=a("<div/>",{id:A,"class":j+" qtip ui-helper-reset "+n+" "+s.style.classes+" "+j+"-pos-"+s.position.my.abbrev(),width:s.style.width||"",height:s.style.height||"",tracking:h.target==="mouse"&&h.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":c,"aria-describedby":A+"-content","aria-hidden":b}).toggleClass(l,G.disabled).data("qtip",y).appendTo(s.position.container).append(F.content=a("<div />",{"class":j+"-content",id:A+"-content","aria-atomic":b})),y.rendered=-1,C=1,B=1,f&&(L(),a.isFunction(f)||N(f,c)),a.isFunction(e)||O(e,c),y.rendered=b,I(),a.each(s.events,function(b,c){a.isFunction(c)&&D.bind(b==="toggle"?"tooltipshow tooltiphide":"tooltip"+b,c)}),a.each(g,function(){this.initialize==="render"&&this(y)}),P(),D.queue("fx",function(a){i.originalEvent=G.event,D.trigger(i,[y]),C=0,B=0,y.redraw(),(s.show.ready||d)&&y.toggle(b,G.event,c),a()}),y},get:function(a){var b,c;switch(a.toLowerCase()){case"dimensions":b={height:D.outerHeight(),width:D.outerWidth()};break;case"offset":b=g.offset(D,s.position.container);break;default:c=H(a.toLowerCase()),b=c[0][c[1]],b=b.precedance?b.string():b}return b},set:function(e,f){function m(a,b){var c,d,e;for(c in k)for(d in k[c])if(e=(new RegExp(d,"i")).exec(a))b.push(e),k[c][d].apply(y,b)}var g=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,h=/^content\.(title|attr)|style/i,i=c,j=c,k=y.checks,l;return"string"==typeof e?(l=e,e={},e[l]=f):e=a.extend(b,{},e),a.each(e,function(b,c){var d=H(b.toLowerCase()),f;f=d[0][d[1]],d[0][d[1]]="object"==typeof c&&c.nodeType?a(c):c,e[b]=[d[0],d[1],c,f],i=g.test(b)||i,j=h.test(b)||j}),w(s),B=C=1,a.each(e,m),B=C=0,y.rendered&&D[0].offsetWidth>0&&(i&&y.reposition(s.position.target==="mouse"?d:G.event),j&&y.redraw()),y},toggle:function(e,f){function t(){e?(a.browser.msie&&D[0].style.removeAttribute("filter"),D.css("overflow",""),"string"==typeof i.autofocus&&a(i.autofocus,D).focus(),i.target.trigger("qtip-"+v+"-inactive")):D.css({display:"",visibility:"",opacity:"",left:"",top:""}),r=a.Event("tooltip"+(e?"visible":"hidden")),r.originalEvent=f?G.event:d,D.trigger(r,[y])}if(!y.rendered)return e?y.render(1):y;var g=e?"show":"hide",i=s[g],j=s[e?"hide":"show"],k=s.position,l=s.content,n=D[0].offsetWidth>0,o=e||i.target.length===1,p=!f||i.target.length<2||G.target[0]===f.target,q,r;(typeof e).search("boolean|number")&&(e=!n);if(!D.is(":animated")&&n===e&&p)return y;if(f){if(/over|enter/.test(f.type)&&/out|leave/.test(G.event.type)&&s.show.target.add(f.target).length===s.show.target.length&&D.has(f.relatedTarget).length)return y;G.event=a.extend({},f)}return r=a.Event("tooltip"+g),r.originalEvent=f?G.event:d,D.trigger(r,[y,90]),r.isDefaultPrevented()?y:(a.attr(D[0],"aria-hidden",!e),e?(G.origin=a.extend({},h),y.focus(f),a.isFunction(l.text)&&O(l.text,c),a.isFunction(l.title.text)&&N(l.title.text,c),!u&&k.target==="mouse"&&k.adjust.mouse&&(a(document).bind("mousemove.qtip",function(a){h={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),u=b),y.reposition(f,arguments[2]),(r.solo=!!i.solo)&&a(m,i.solo).not(D).qtip("hide",r)):(clearTimeout(y.timers.show),delete G.origin,u&&!a(m+'[tracking="true"]:visible',i.solo).not(D).length&&(a(document).unbind("mousemove.qtip"),u=c),y.blur(f)),i.effect===c||o===c?(D[g](),t.call(D)):a.isFunction(i.effect)?(D.stop(1,1),i.effect.call(D,y),D.queue("fx",function(a){t(),a()})):D.fadeTo(90,e?1:0,t),e&&i.target.trigger("qtip-"+v+"-inactive"),y)},show:function(a){return y.toggle(b,a)},hide:function(a){return y.toggle(c,a)},focus:function(b){if(!y.rendered)return y;var c=a(m),d=parseInt(D[0].style.zIndex,10),e=f.zindex+c.length,g=a.extend({},b),h,i;return D.hasClass(o)||(i=a.Event("tooltipfocus"),i.originalEvent=g,D.trigger(i,[y,e]),i.isDefaultPrevented()||(d!==e&&(c.each(function(){this.style.zIndex>d&&(this.style.zIndex=this.style.zIndex-1)}),c.filter("."+o).qtip("blur",g)),D.addClass(o)[0].style.zIndex=e)),y},blur:function(b){var c=a.extend({},b),d;return D.removeClass(o),d=a.Event("tooltipblur"),d.originalEvent=c,D.trigger(d,[y]),y},reposition:function(b,d){if(!y.rendered||B)return y;B=1;var e=s.position.target,f=s.position,i=f.my,k=f.at,l=f.adjust,m=l.method.split(" "),n=D.outerWidth(),o=D.outerHeight(),p=0,q=0,r=a.Event("tooltipmove"),t=D.css("position")==="fixed",u=f.viewport,v={left:0,top:0},w=f.container,x=c,A=y.plugins.tip,C=D[0].offsetWidth>0,E={horizontal:m[0],vertical:m[1]=m[1]||m[0],enabled:u.jquery&&e[0]!==window&&e[0]!==z&&l.method!=="none",left:function(a){var b=E.horizontal==="shift",c=l.x*(E.horizontal.substr(-6)==="invert"?2:0),d=-w.offset.left+u.offset.left+u.scrollLeft,e=i.x==="left"?n:i.x==="right"?-n:-n/2,f=k.x==="left"?p:k.x==="right"?-p:-p/2,g=A&&A.size?A.size.width||0:0,h=A&&A.corner&&A.corner.precedance==="x"&&!b?g:0,j=d-a+h,m=a+n-u.width-d+h,o=e-(i.precedance==="x"||i.x===i.y?f:0)-(k.x==="center"?p/2:0),q=i.x==="center";return b?(h=A&&A.corner&&A.corner.precedance==="y"?g:0,o=(i.x==="left"?1:-1)*e-h,v.left+=j>0?j:m>0?-m:0,v.left=Math.max(-w.offset.left+u.offset.left+(h&&A.corner.x==="center"?A.offset:0),a-o,Math.min(Math.max(-w.offset.left+u.offset.left+u.width,a+o),v.left))):(j>0&&(i.x!=="left"||m>0)?v.left-=o+c:m>0&&(i.x!=="right"||j>0)&&(v.left-=(q?-o:o)+c),v.left<d&&-v.left>m&&(v.left=a)),v.left-a},top:function(a){var b=E.vertical==="shift",c=l.y*(E.vertical.substr(-6)==="invert"?2:0),d=-w.offset.top+u.offset.top+u.scrollTop,e=i.y==="top"?o:i.y==="bottom"?-o:-o/2,f=k.y==="top"?q:k.y==="bottom"?-q:-q/2,g=A&&A.size?A.size.height||0:0,h=A&&A.corner&&A.corner.precedance==="y"&&!b?g:0,j=d-a+h,m=a+o-u.height-d+h,n=e-(i.precedance==="y"||i.x===i.y?f:0)-(k.y==="center"?q/2:0),p=i.y==="center";return b?(h=A&&A.corner&&A.corner.precedance==="x"?g:0,n=(i.y==="top"?1:-1)*e-h,v.top+=j>0?j:m>0?-m:0,v.top=Math.max(-w.offset.top+u.offset.top+(h&&A.corner.x==="center"?A.offset:0),a-n,Math.min(Math.max(-w.offset.top+u.offset.top+u.height,a+n),v.top))):(j>0&&(i.y!=="top"||m>0)?v.top-=n+c:m>0&&(i.y!=="bottom"||j>0)&&(v.top-=(p?-n:n)+c),v.top<0&&-v.top>m&&(v.top=a)),v.top-a}},H;if(a.isArray(e)&&e.length===2)k={x:"left",y:"top"},v={left:e[0],top:e[1]};else if(e==="mouse"&&(b&&b.pageX||G.event.pageX))k={x:"left",y:"top"},b=(!b||b.type!=="resize"&&b.type!=="scroll"?b&&b.pageX&&b.type==="mousemove"?b:h&&h.pageX&&(l.mouse||!b||!b.pageX)?{pageX:h.pageX,pageY:h.pageY}:!l.mouse&&G.origin&&G.origin.pageX&&s.show.distance?G.origin:b:G.event)||b||G.event||h||{},v={top:b.pageY,left:b.pageX};else{e==="event"?b&&b.target&&b.type!=="scroll"&&b.type!=="resize"?e=G.target=a(b.target):e=G.target:e=G.target=a(e.jquery?e:F.target),e=a(e).eq(0);if(e.length===0)return y;e[0]===document||e[0]===window?(p=g.iOS?window.innerWidth:e.width(),q=g.iOS?window.innerHeight:e.height(),e[0]===window&&(v={top:(u||e).scrollTop(),left:(u||e).scrollLeft()})):e.is("area")&&g.imagemap?v=g.imagemap(e,k,E.enabled?m:c):e[0].namespaceURI==="http://www.w3.org/2000/svg"&&g.svg?v=g.svg(e,k):(p=e.outerWidth(),q=e.outerHeight(),v=g.offset(e,w)),v.offset&&(p=v.width,q=v.height,x=v.flipoffset,v=v.offset);if(g.iOS<4.1&&g.iOS>3.1||g.iOS==4.3||!g.iOS&&t)H=a(window),v.left-=H.scrollLeft(),v.top-=H.scrollTop();v.left+=k.x==="right"?p:k.x==="center"?p/2:0,v.top+=k.y==="bottom"?q:k.y==="center"?q/2:0}return v.left+=l.x+(i.x==="right"?-n:i.x==="center"?-n/2:0),v.top+=l.y+(i.y==="bottom"?-o:i.y==="center"?-o/2:0),E.enabled?(u={elem:u,height:u[(u[0]===window?"h":"outerH")+"eight"](),width:u[(u[0]===window?"w":"outerW")+"idth"](),scrollLeft:t?0:u.scrollLeft(),scrollTop:t?0:u.scrollTop(),offset:u.offset()||{left:0,top:0}},w={elem:w,scrollLeft:w.scrollLeft(),scrollTop:w.scrollTop(),offset:w.offset()||{left:0,top:0}},v.adjusted={left:E.horizontal!=="none"?E.left(v.left):0,top:E.vertical!=="none"?E.top(v.top):0},v.adjusted.left+v.adjusted.top&&D.attr("class",D[0].className.replace(/ui-tooltip-pos-\w+/i,j+"-pos-"+i.abbrev())),x&&v.adjusted.left&&(v.left+=x.left),x&&v.adjusted.top&&(v.top+=x.top)):v.adjusted={left:0,top:0},r.originalEvent=a.extend({},b),D.trigger(r,[y,v,u.elem||u]),r.isDefaultPrevented()?y:(delete v.adjusted,d===c||!C||isNaN(v.left)||isNaN(v.top)||e==="mouse"||!a.isFunction(f.effect)?D.css(v):a.isFunction(f.effect)&&(f.effect.call(D,y,a.extend({},v)),D.queue(function(b){a(this).css({opacity:"",height:""}),a.browser.msie&&this.style.removeAttribute("filter"),b()})),B=0,y)},redraw:function(){if(y.rendered<1||C)return y;var a=s.position.container,b,c,d,e;return C=1,s.style.height&&D.css("height",s.style.height),s.style.width?D.css("width",s.style.width):(D.css("width","").addClass(q),c=D.width()+1,d=D.css("max-width")||"",e=D.css("min-width")||"",b=(d+e).indexOf("%")>-1?a.width()/100:0,d=(d.indexOf("%")>-1?b:1)*parseInt(d,10)||c,e=(e.indexOf("%")>-1?b:1)*parseInt(e,10)||0,c=d+e?Math.min(Math.max(c,e),d):c,D.css("width",Math.round(c)).removeClass(q)),C=0,y},disable:function(b){return"boolean"!=typeof b&&(b=!D.hasClass(l)&&!G.disabled),y.rendered?(D.toggleClass(l,b),a.attr(D[0],"aria-disabled",b)):G.disabled=!!b,y},enable:function(){return y.disable(c)},destroy:function(){var c=r[0],d=a.attr(c,t),e=r.data("qtip");y.destroyed=b,y.rendered&&(D.stop(1,0).remove(),a.each(y.plugins,function(){this.destroy&&this.destroy()})),clearTimeout(y.timers.show),clearTimeout(y.timers.hide),Q();if(!e||y===e)a.removeData(c,"qtip"),s.suppress&&d&&(a.attr(c,"title",d),r.removeAttr(t)),r.removeAttr("aria-describedby");return r.unbind(".qtip-"+v),delete i[y.id],r}})}function y(e,h){var i,j,k,l,m,n=a(this),o=a(document.body),p=this===document?o:n,q=n.metadata?n.metadata(h.metadata):d,r=h.metadata.type==="html5"&&q?q[h.metadata.name]:d,s=n.data(h.metadata.name||"qtipopts");try{s=typeof s=="string"?(new Function("return "+s))():s}catch(u){v("Unable to parse HTML5 attribute data: "+s)}l=a.extend(b,{},f.defaults,h,typeof s=="object"?w(s):d,w(r||q)),j=l.position,l.id=e;if("boolean"==typeof l.content.text){k=n.attr(l.content.attr);if(l.content.attr===c||!k)return v("Unable to locate content for tooltip! Aborting render of tooltip on element: ",n),c;l.content.text=k}j.container.length||(j.container=o),j.target===c&&(j.target=p),l.show.target===c&&(l.show.target=p),l.show.solo===b&&(l.show.solo=j.container.closest("body")),l.hide.target===c&&(l.hide.target=p),l.position.viewport===b&&(l.position.viewport=j.container),j.container=j.container.eq(0),j.at=new g.Corner(j.at),j.my=new g.Corner(j.my);if(a.data(this,"qtip"))if(l.overwrite)n.qtip("destroy");else if(l.overwrite===c)return c;return l.suppress&&(m=a.attr(this,"title"))&&a(this).removeAttr("title").attr(t,m),i=new x(n,l,e,!!k),a.data(this,"qtip",i),n.bind("remove.qtip-"+e+" removeqtip.qtip-"+e,function(){i.destroy()}),i}function z(d){var e=this,g=d.elements.tooltip,h=d.options.content.ajax,i=f.defaults.content.ajax,j=".qtip-ajax",k=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,l=b,m=c,n;d.checks.ajax={"^content.ajax":function(a,b,c){b==="ajax"&&(h=c),b==="once"?e.init():h&&h.url?e.load():g.unbind(j)}},a.extend(e,{init:function(){return h&&h.url&&g.unbind(j)[h.once?"one":"bind"]("tooltipshow"+j,e.load),e},load:function(f){function r(){var e;if(d.destroyed)return;l=c,p&&(m=b,d.show(f.originalEvent)),(e=i.complete||h.complete)&&a.isFunction(e)&&e.apply(h.context||d,arguments)}function s(b,c,e){var f;if(d.destroyed)return;o&&(b=a("<div/>").append(b.replace(k,"")).find(o)),(f=i.success||h.success)&&a.isFunction(f)?f.call(h.context||d,b,c,e):d.set("content.text",b)}function t(a,b,c){if(d.destroyed||a.status===0)return;d.set("content.text",b+": "+c)}if(m){m=c;return}var g=h.url.indexOf(" "),j=h.url,o,p=!h.loading&&l;if(p)try{f.preventDefault()}catch(q){}else if(f&&f.isDefaultPrevented())return e;n&&n.abort&&n.abort(),g>-1&&(o=j.substr(g),j=j.substr(0,g)),n=a.ajax(a.extend({error:i.error||t,context:d},h,{url:j,success:s,complete:r}))},destroy:function(){n&&n.abort&&n.abort(),d.destroyed=b}}),e.init()}function A(b){var c=this,d=b.elements,e=d.tooltip,f=".bgiframe-"+b.id;a.extend(c,{init:function(){d.bgiframe=a('<iframe class="ui-tooltip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>'),d.bgiframe.appendTo(e),e.bind("tooltipmove"+f,c.adjust)},adjust:function(){var a=b.get("dimensions"),c=b.plugins.tip,f=d.tip,g,h;h=parseInt(e.css("border-left-width"),10)||0,h={left:-h,top:-h},c&&f&&(g=c.corner.precedance==="x"?["width","left"]:["height","top"],h[g[1]]-=f[g[0]]()),d.bgiframe.css(h).css(a)},destroy:function(){d.bgiframe.remove(),e.unbind(f)}}),c.init()}function B(d){var e=this,f=d.options.show.modal,h=d.elements,i=h.tooltip,j="#qtip-overlay",k=".qtipmodal",l=k+d.id,n="is-modal-qtip",p=a(document.body),q;d.checks.modal={"^show.modal.(on|blur)$":function(){e.init(),h.overlay.toggle(i.is(":visible"))}},a.extend(e,{init:function(){return f.on?(q=e.create(),i.attr(n,b).css("z-index",g.modal.zindex+a(m+"["+n+"]").length).unbind(k).unbind(l).bind("tooltipshow"+k+" tooltiphide"+k,function(b,c,d){var f=b.originalEvent;if(b.target===i[0])if(f&&b.type==="tooltiphide"&&/mouse(leave|enter)/.test(f.type)&&a(f.relatedTarget).closest(q[0]).length)try{b.preventDefault()}catch(g){}else(!f||f&&!f.solo)&&e[b.type.replace("tooltip","")](b,d)}).bind("tooltipfocus"+k,function(b){if(b.isDefaultPrevented()||b.target!==i[0])return;var c=a(m).filter("["+n+"]"),d=g.modal.zindex+c.length,e=parseInt(i[0].style.zIndex,10);q[0].style.zIndex=d-1,c.each(function(){this.style.zIndex>e&&(this.style.zIndex-=1)}),c.end().filter("."+o).qtip("blur",b.originalEvent),i.addClass(o)[0].style.zIndex=d;try{b.preventDefault()}catch(f){}}).bind("tooltiphide"+k,function(b){b.target===i[0]&&a("["+n+"]").filter(":visible").not(i).last().qtip("focus",b)}),f.escape&&a(window).unbind(l).bind("keydown"+l,function(a){a.keyCode===27&&i.hasClass(o)&&d.hide(a)}),f.blur&&h.overlay.unbind(l).bind("click"+l,function(a){i.hasClass(o)&&d.hide(a)}),e):e},create:function(){function d(){q.css({height:a(window).height(),width:a(window).width()})}var b=a(j);return b.length?h.overlay=b.insertAfter(a(m).last()):(q=h.overlay=a("<div />",{id:j.substr(1),html:"<div></div>",mousedown:function(){return c}}).insertAfter(a(m).last()),a(window).unbind(k).bind("resize"+k,d),d(),q)},toggle:function(d,g,h){if(d&&d.isDefaultPrevented())return e;var j=f.effect,k=g?"show":"hide",o=q.is(":visible"),r=a("["+n+"]").filter(":visible").not(i),s;return q||(q=e.create()),q.is(":animated")&&o===g||!g&&r.length?e:(g?(q.css({left:0,top:0}),q.toggleClass("blurs",f.blur),p.bind("focusin"+l,function(b){var d=a(b.target),e=d.closest(".qtip"),f=e.length<1?c:parseInt(e[0].style.zIndex,10)>parseInt(i[0].style.zIndex,10);!f&&a(b.target).closest(m)[0]!==i[0]&&i.find("input:visible").filter(":first").focus()})):p.undelegate("*","focusin"+l),q.stop(b,c),a.isFunction(j)?j.call(q,g):j===c?q[k]():q.fadeTo(parseInt(h,10)||90,g?1:0,function(){g||a(this).hide()}),g||q.queue(function(a){q.css({left:"",top:""}),a()}),e)},show:function(a,c){return e.toggle(a,b,c)},hide:function(a,b){return e.toggle(a,c,b)},destroy:function(){var b=q;return b&&(b=a("["+n+"]").not(i).length<1,b?(h.overlay.remove(),a(window).unbind(k)):h.overlay.unbind(k+d.id),p.undelegate("*","focusin"+l)),i.removeAttr(n).unbind(k)}}),e.init()}function C(a,b,c){var d=Math.ceil(b/2),e=Math.ceil(c/2),f={bottomright:[[0,0],[b,c],[b,0]],bottomleft:[[0,0],[b,0],[0,c]],topright:[[0,c],[b,0],[b,c]],topleft:[[0,0],[0,c],[b,c]],topcenter:[[0,c],[d,0],[b,c]],bottomcenter:[[0,0],[b,0],[d,c]],rightcenter:[[0,0],[b,e],[0,c]],leftcenter:[[b,0],[b,c],[0,e]]};return f.lefttop=f.bottomright,f.righttop=f.bottomleft,f.leftbottom=f.topright,f.rightbottom=f.topleft,f[a.string()]}function D(f,h){function t(){var a=n.width;n.width=n.height,n.height=a}function u(){n.width=j.width,n.height=j.height}function v(a,d,g,h){if(!k.tip)return;var l=i.corner.clone(),n=g.adjusted,o=f.options.position.adjust.method.split(" "),p=o[0],q=o[1]||o[0],r={left:c,top:c,x:0,y:0},s,t={},u;i.corner.fixed!==b&&(p==="shift"&&l.precedance==="x"&&n.left&&l.y!=="center"?l.precedance=l.precedance==="x"?"y":"x":p!=="shift"&&n.left&&(l.x=l.x==="center"?n.left>0?"left":"right":l.x==="left"?"right":"left"),q==="shift"&&l.precedance==="y"&&n.top&&l.x!=="center"?l.precedance=l.precedance==="y"?"x":"y":q!=="shift"&&n.top&&(l.y=l.y==="center"?n.top>0?"top":"bottom":l.y==="top"?"bottom":"top"),l.string()!==m.corner.string()&&(m.top!==n.top||m.left!==n.left)&&i.update(l,c)),s=i.position(l,n),s[l.x]+=w(l,l.x,b),s[l.y]+=w(l,l.y,b),s.right!==e&&(s.left=-s.right),s.bottom!==e&&(s.top=-s.bottom),s.user=Math.max(0,j.offset);if(r.left=p==="shift"&&!!n.left)l.x==="center"?t["margin-left"]=r.x=s["margin-left"]-n.left:(u=s.right!==e?[n.left,-s.left]:[-n.left,s.left],(r.x=Math.max(u[0],u[1]))>u[0]&&(g.left-=n.left,r.left=c),t[s.right!==e?"right":"left"]=r.x);if(r.top=q==="shift"&&!!n.top)l.y==="center"?t["margin-top"]=r.y=s["margin-top"]-n.top:(u=s.bottom!==e?[n.top,-s.top]:[-n.top,s.top],(r.y=Math.max(u[0],u[1]))>u[0]&&(g.top-=n.top,r.top=c),t[s.bottom!==e?"bottom":"top"]=r.y);k.tip.css(t).toggle(!(r.x&&r.y||l.x==="center"&&r.y||l.y==="center"&&r.x)),g.left-=s.left.charAt?s.user:p!=="shift"||r.top||!r.left&&!r.top?s.left:0,g.top-=s.top.charAt?s.user:q!=="shift"||r.left||!r.left&&!r.top?s.top:0,m.left=n.left,m.top=n.top,m.corner=l.clone()}function w(a,b,c){b=b?b:a[a.precedance];var d=l.hasClass(q),e=k.titlebar&&a.y==="top",f=e?k.titlebar:k.tooltip,g="border-"+b+"-width",h;return l.addClass(q),h=parseInt(f.css(g),10),h=(c?h||parseInt(l.css(g),10):h)||0,l.toggleClass(q,d),h}function x(b){var c=k.titlebar&&b.y==="top",d=c?k.titlebar:k.content,e=a.browser.mozilla,f=e?"-moz-":a.browser.webkit?"-webkit-":"",g=b.y+(e?"":"-")+b.x,h=f+(e?"border-radius-"+g:"border-"+g+"-radius");return parseInt(d.css(h),10)||parseInt(l.css(h),10)||0}function y(a){var b=a.precedance==="y",c=n[b?"width":"height"],d=n[b?"height":"width"],e=a.string().indexOf("center")>-1,f=c*(e?.5:1),g=Math.pow,h=Math.round,i,j,k,l=Math.sqrt(g(f,2)+g(d,2)),m=[p/f*l,p/d*l];return m[2]=Math.sqrt(g(m[0],2)-g(p,2)),m[3]=Math.sqrt(g(m[1],2)-g(p,2)),i=l+m[2]+m[3]+(e?0:m[0]),j=i/l,k=[h(j*d),h(j*c)],{height:k[b?0:1],width:k[b?1:0]}}var i=this,j=f.options.style.tip,k=f.elements,l=k.tooltip,m={top:0,left:0},n={width:j.width,height:j.height},o={},p=j.border||0,r=".qtip-tip",s=!!(a("<canvas />")[0]||{}).getContext;i.corner=d,i.mimic=d,i.border=p,i.offset=j.offset,i.size=n,f.checks.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){i.init()||i.destroy(),f.reposition()},"^style.tip.(height|width)$":function(){n={width:j.width,height:j.height},i.create(),i.update(),f.reposition()},"^content.title.text|style.(classes|widget)$":function(){k.tip&&k.tip.length&&i.update()}},a.extend(i,{init:function(){var b=i.detectCorner()&&(s||a.browser.msie);return b&&(i.create(),i.update(),l.unbind(r).bind("tooltipmove"+r,v)),b},detectCorner:function(){var a=j.corner,d=f.options.position,e=d.at,h=d.my.string?d.my.string():d.my;return a===c||h===c&&e===c?c:(a===b?i.corner=new g.Corner(h):a.string||(i.corner=new g.Corner(a),i.corner.fixed=b),m.corner=new g.Corner(i.corner.string()),i.corner.string()!=="centercenter")},detectColours:function(b){var c,d,e,f=k.tip.css("cssText",""),g=b||i.corner,h=g[g.precedance],m="border-"+h+"-color",p="border"+h.charAt(0)+h.substr(1)+"Color",r=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,s="background-color",t="transparent",u=" !important",v=k.titlebar&&(g.y==="top"||g.y==="center"&&f.position().top+n.height/2+j.offset<k.titlebar.outerHeight(1)),w=v?k.titlebar:k.tooltip;l.addClass(q),o.fill=d=f.css(s),o.border=e=f[0].style[p]||f.css(m)||l.css(m);if(!d||r.test(d))o.fill=w.css(s)||t,r.test(o.fill)&&(o.fill=l.css(s)||d);if(!e||r.test(e)||e===a(document.body).css("color")){o.border=w.css(m)||t;if(r.test(o.border)||o.border===w.css("color"))o.border=l.css(m)||l.css(p)||e}a("*",f).add(f).css("cssText",s+":"+t+u+";border:0"+u+";"),l.removeClass(q)},create:function(){var b=n.width,c=n.height,d;k.tip&&k.tip.remove(),k.tip=a("<div />",{"class":"ui-tooltip-tip"}).css({width:b,height:c}).prependTo(l),s?a("<canvas />").appendTo(k.tip)[0].getContext("2d").save():(d='<vml:shape coordorigin="0,0" style="display:inline-block; position:absolute; behavior:url(#default#VML);"></vml:shape>',k.tip.html(d+d),a("*",k.tip).bind("click mousedown",function(a){a.stopPropagation()}))},update:function(e,f){var h=k.tip,q=h.children(),r=n.width,v=n.height,x="px solid ",z="px dashed transparent",A=j.mimic,B=Math.round,D,E,F,G,H;e||(e=m.corner||i.corner),A===c?A=e:(A=new g.Corner(A),A.precedance=e.precedance,A.x==="inherit"?A.x=e.x:A.y==="inherit"?A.y=e.y:A.x===A.y&&(A[e.precedance]=e[e.precedance])),D=A.precedance,e.precedance==="x"?t():u(),k.tip.css({width:r=n.width,height:v=n.height}),i.detectColours(e),o.border!=="transparent"?(p=w(e,d,b),j.border===0&&p>0&&(o.fill=o.border),i.border=p=j.border!==b?j.border:p):i.border=p=0,F=C(A,r,v),i.size=H=y(e),h.css(H),e.precedance==="y"?G=[B(A.x==="left"?p:A.x==="right"?H.width-r-p:(H.width-r)/2),B(A.y==="top"?H.height-v:0)]:G=[B(A.x==="left"?H.width-r:0),B(A.y==="top"?p:A.y==="bottom"?H.height-v-p:(H.height-v)/2)],s?(q.attr(H),E=q[0].getContext("2d"),E.restore(),E.save(),E.clearRect(0,0,3e3,3e3),E.fillStyle=o.fill,E.strokeStyle=o.border,E.lineWidth=p*2,E.lineJoin="miter",E.miterLimit=100,E.translate(G[0],G[1]),E.beginPath(),E.moveTo(F[0][0],F[0][1]),E.lineTo(F[1][0],F[1][1]),E.lineTo(F[2][0],F[2][1]),E.closePath(),p&&(l.css("background-clip")==="border-box"&&(E.strokeStyle=o.fill,E.stroke()),E.strokeStyle=o.border,E.stroke()),E.fill()):(F="m"+F[0][0]+","+F[0][1]+" l"+F[1][0]+","+F[1][1]+" "+F[2][0]+","+F[2][1]+" xe",G[2]=p&&/^(r|b)/i.test(e.string())?parseFloat(a.browser.version,10)===8?2:1:0,q.css({antialias:""+(A.string().indexOf("center")>-1),left:G[0]-G[2]*Number(D==="x"),top:G[1]-G[2]*Number(D==="y"),width:r+p,height:v+p}).each(function(b){var c=a(this);c[c.prop?"prop":"attr"]({coordsize:r+p+" "+(v+p),path:F,fillcolor:o.fill,filled:!!b,stroked:!b}).css({display:p||b?"block":"none"}),!b&&c.html()===""&&c.html('<vml:stroke weight="'+p*2+'px" color="'+o.border+'" miterlimit="1000" joinstyle="miter" '+' style="behavior:url(#default#VML); display:inline-block;" />')})),f!==c&&i.position(e)},position:function(d){var e=k.tip,f={},g=Math.max(0,j.offset),h,l,m;return j.corner===c||!e?c:(d=d||i.corner,h=d.precedance,l=y(d),m=[d.x,d.y],h==="x"&&m.reverse(),a.each(m,function(a,c){var e,i;c==="center"?(e=h==="y"?"left":"top",f[e]="50%",f["margin-"+e]=-Math.round(l[h==="y"?"width":"height"]/2)+g):(e=w(d,c,b),i=x(d),f[c]=a?p?w(d,c):0:g+(i>e?i:-e))}),f[d[h]]-=l[h==="x"?"width":"height"],e.css({top:"",bottom:"",left:"",right:"",margin:""}).css(f),f)},destroy:function(){k.tip&&k.tip.remove(),k.tip=!1,l.unbind(r)}}),i.init()}var b=!0,c=!1,d=null,e,f,g,h,i={},j="ui-tooltip",k="ui-widget",l="ui-state-disabled",m="div.qtip."+j,n=j+"-default",o=j+"-focus",p=j+"-hover",q=j+"-fluid",r="-31000px",s="_replacedByqTip",t="oldtitle",u;f=a.fn.qtip=function(g,h,i){var j=(""+g).toLowerCase(),k=d,l=a.makeArray(arguments).slice(1),m=l[l.length-1],n=this[0]?a.data(this[0],"qtip"):d;if(!arguments.length&&n||j==="api")return n;if("string"==typeof g)return this.each(function(){var d=a.data(this,"qtip");if(!d)return b;m&&m.timeStamp&&(d.cache.event=m);if(j!=="option"&&j!=="options"||!h)d[j]&&d[j].apply(d[j],l);else{if(!a.isPlainObject(h)&&i===e)return k=d.
get(h),c;d.set(h,i)}}),k!==d?k:this;if("object"==typeof g||!arguments.length)return n=w(a.extend(b,{},g)),f.bind.call(this,n,m)},f.bind=function(d,j){return this.each(function(k){function r(b){function d(){p.render(typeof b=="object"||l.show.ready),m.show.add(m.hide).unbind(o)}if(p.cache.disabled)return c;p.cache.event=a.extend({},b),p.cache.target=b?a(b.target):[e],l.show.delay>0?(clearTimeout(p.timers.show),p.timers.show=setTimeout(d,l.show.delay),n.show!==n.hide&&m.hide.bind(n.hide,function(){clearTimeout(p.timers.show)})):d()}var l,m,n,o,p,q;q=a.isArray(d.id)?d.id[k]:d.id,q=!q||q===c||q.length<1||i[q]?f.nextid++:i[q]=q,o=".qtip-"+q+"-create",p=y.call(this,q,d);if(p===c)return b;l=p.options,a.each(g,function(){this.initialize==="initialize"&&this(p)}),m={show:l.show.target,hide:l.hide.target},n={show:a.trim(""+l.show.event).replace(/ /g,o+" ")+o,hide:a.trim(""+l.hide.event).replace(/ /g,o+" ")+o},/mouse(over|enter)/i.test(n.show)&&!/mouse(out|leave)/i.test(n.hide)&&(n.hide+=" mouseleave"+o),m.show.bind("mousemove"+o,function(a){h={pageX:a.pageX,pageY:a.pageY,type:"mousemove"},p.cache.onTarget=b}),m.show.bind(n.show,r),(l.show.ready||l.prerender)&&r(j)})},g=f.plugins={Corner:function(a){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();var b=a.charAt(0);this.precedance=b==="t"||b==="b"?"y":"x",this.string=function(){return this.precedance==="y"?this.y+this.x:this.x+this.y},this.abbrev=function(){var a=this.x.substr(0,1),b=this.y.substr(0,1);return a===b?a:a==="c"||a!=="c"&&b!=="c"?b+a:a+b},this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone}}},offset:function(b,c){function j(a,b){d.left+=b*a.scrollLeft(),d.top+=b*a.scrollTop()}var d=b.offset(),e=b.closest("body")[0],f=c,g,h,i;if(f){do f.css("position")!=="static"&&(h=f.position(),d.left-=h.left+(parseInt(f.css("borderLeftWidth"),10)||0)+(parseInt(f.css("marginLeft"),10)||0),d.top-=h.top+(parseInt(f.css("borderTopWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0),!g&&(i=f.css("overflow"))!=="hidden"&&i!=="visible"&&(g=f));while((f=a(f[0].offsetParent)).length);g&&g[0]!==e&&j(g,1)}return d},iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,3})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_","."))||c,fn:{attr:function(b,c){if(this.length){var d=this[0],e="title",f=a.data(d,"qtip");if(b===e&&f&&"object"==typeof f&&f.options.suppress)return arguments.length<2?a.attr(d,t):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",c),this.attr(t,c))}return a.fn["attr"+s].apply(this,arguments)},clone:function(b){var c=a([]),d="title",e=a.fn["clone"+s].apply(this,arguments);return b||e.filter("["+t+"]").attr("title",function(){return a.attr(this,t)}).removeAttr(t),e}}},a.each(g.fn,function(c,d){if(!d||a.fn[c+s])return b;var e=a.fn[c+s]=a.fn[c];a.fn[c]=function(){return d.apply(this,arguments)||e.apply(this,arguments)}}),a.ui||(a["cleanData"+s]=a.cleanData,a.cleanData=function(b){for(var c=0,d;(d=b[c])!==e;c++)try{a(d).triggerHandler("removeqtip")}catch(f){}a["cleanData"+s](b)}),f.version="2.0.0pre",f.nextid=0,f.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),f.zindex=15e3,f.defaults={prerender:c,id:c,overwrite:b,suppress:b,content:{text:b,attr:"title",title:{text:c,button:c}},position:{my:"top left",at:"bottom right",target:c,container:c,viewport:c,adjust:{x:0,y:0,mouse:b,resize:b,method:"flip flip"},effect:function(b,d,e){a(this).animate(d,{duration:200,queue:c})}},show:{target:c,event:"mouseenter",effect:b,delay:90,solo:c,ready:c,autofocus:c},hide:{target:c,event:"mouseleave",effect:b,delay:0,fixed:c,inactive:c,leave:"window",distance:c},style:{classes:"",widget:c,width:c,height:c,def:b},events:{render:d,move:d,show:d,hide:d,toggle:d,visible:d,hidden:d,focus:d,blur:d}},g.ajax=function(a){var b=a.plugins.ajax;return"object"==typeof b?b:a.plugins.ajax=new z(a)},g.ajax.initialize="render",g.ajax.sanitize=function(a){var b=a.content,c;b&&"ajax"in b&&(c=b.ajax,typeof c!="object"&&(c=a.content.ajax={url:c}),"boolean"!=typeof c.once&&c.once&&(c.once=!!c.once))},a.extend(b,f.defaults,{content:{ajax:{loading:b,once:b}}}),g.bgiframe=function(b){var d=a.browser,e=b.plugins.bgiframe;return a("select, object").length<1||!d.msie||(""+d.version).charAt(0)!=="6"?c:"object"==typeof e?e:b.plugins.bgiframe=new A(b)},g.bgiframe.initialize="render",g.imagemap=function(b,c,d){function n(a,b,c){var d=0,e=1,f=1,g=0,h=0,i=a.width,j=a.height;while(i>0&&j>0&&e>0&&f>0){i=Math.floor(i/2),j=Math.floor(j/2),c.x==="left"?e=i:c.x==="right"?e=a.width-i:e+=Math.floor(i/2),c.y==="top"?f=j:c.y==="bottom"?f=a.height-j:f+=Math.floor(j/2),d=b.length;while(d--){if(b.length<2)break;g=b[d][0]-a.offset.left,h=b[d][1]-a.offset.top,(c.x==="left"&&g>=e||c.x==="right"&&g<=e||c.x==="center"&&(g<e||g>a.width-e)||c.y==="top"&&h>=f||c.y==="bottom"&&h<=f||c.y==="center"&&(h<f||h>a.height-f))&&b.splice(d,1)}}return{left:b[0][0],top:b[0][1]}}b.jquery||(b=a(b));var e=(b[0].shape||b.attr("shape")).toLowerCase(),f=(b[0].coords||b.attr("coords")).split(","),g=[],h=a('img[usemap="#'+b.parent("map").attr("name")+'"]'),i=h.offset(),j={width:0,height:0,offset:{top:1e10,right:0,bottom:0,left:1e10}},k=0,l=0,m;i.left+=Math.ceil((h.outerWidth()-h.width())/2),i.top+=Math.ceil((h.outerHeight()-h.height())/2);if(e==="poly"){k=f.length;while(k--)l=[parseInt(f[--k],10),parseInt(f[k+1],10)],l[0]>j.offset.right&&(j.offset.right=l[0]),l[0]<j.offset.left&&(j.offset.left=l[0]),l[1]>j.offset.bottom&&(j.offset.bottom=l[1]),l[1]<j.offset.top&&(j.offset.top=l[1]),g.push(l)}else g=a.map(f,function(a){return parseInt(a,10)});switch(e){case"rect":j={width:Math.abs(g[2]-g[0]),height:Math.abs(g[3]-g[1]),offset:{left:Math.min(g[0],g[2]),top:Math.min(g[1],g[3])}};break;case"circle":j={width:g[2]+2,height:g[2]+2,offset:{left:g[0],top:g[1]}};break;case"poly":a.extend(j,{width:Math.abs(j.offset.right-j.offset.left),height:Math.abs(j.offset.bottom-j.offset.top)}),c.string()==="centercenter"?j.offset={left:j.offset.left+j.width/2,top:j.offset.top+j.height/2}:(j.offset=n(j,g.slice(),c),d&&(d[0]==="flip"||d[1]==="flip")&&(j.flipoffset=n(j,g.slice(),{x:c.x==="left"?"right":c.x==="right"?"left":"center",y:c.y==="top"?"bottom":c.y==="bottom"?"top":"center"}),j.flipoffset.left-=j.offset.left,j.flipoffset.top-=j.offset.top)),j.width=j.height=0}return j.offset.left+=i.left,j.offset.top+=i.top,j},g.modal=function(a){var b=a.plugins.modal;return"object"==typeof b?b:a.plugins.modal=new B(a)},g.modal.initialize="render",g.modal.sanitize=function(a){a.show&&(typeof a.show.modal!="object"?a.show.modal={on:!!a.show.modal}:typeof a.show.modal.on=="undefined"&&(a.show.modal.on=b))},g.modal.zindex=f.zindex+1e3,a.extend(b,f.defaults,{show:{modal:{on:c,effect:b,blur:b,escape:b}}}),g.svg=function(b,c){var d=a(document),e=b[0],f={width:0,height:0,offset:{top:1e10,left:1e10}},g,h,i,j,k;if(e.getBBox&&e.parentNode){g=e.getBBox(),h=e.getScreenCTM(),i=e.farthestViewportElement||e;if(!i.createSVGPoint)return f;j=i.createSVGPoint(),j.x=g.x,j.y=g.y,k=j.matrixTransform(h),f.offset.left=k.x,f.offset.top=k.y,j.x+=g.width,j.y+=g.height,k=j.matrixTransform(h),f.width=k.x-f.offset.left,f.height=k.y-f.offset.top,f.offset.left+=d.scrollLeft(),f.offset.top+=d.scrollTop()}return f},g.tip=function(a){var b=a.plugins.tip;return"object"==typeof b?b:a.plugins.tip=new D(a)},g.tip.initialize="render",g.tip.sanitize=function(a){var c=a.style,d;c&&"tip"in c&&(d=a.style.tip,typeof d!="object"&&(a.style.tip={corner:d}),/string|boolean/i.test(typeof d.corner)||(d.corner=b),typeof d.width!="number"&&delete d.width,typeof d.height!="number"&&delete d.height,typeof d.border!="number"&&d.border!==b&&delete d.border,typeof d.offset!="number"&&delete d.offset)},a.extend(b,f.defaults,{style:{tip:{corner:b,mimic:c,width:6,height:6,border:b,offset:0}}})});(function(e){e.color={};e.color.make=function(c,a,d,f){var b={};b.r=c||0;b.g=a||0;b.b=d||0;b.a=f!=null?f:1;b.add=function(a,c){for(var d=0;d<a.length;++d)b[a.charAt(d)]+=c;return b.normalize()};b.scale=function(a,d){for(var c=0;c<a.length;++c)b[a.charAt(c)]*=d;return b.normalize()};b.toString=function(){return b.a>=1?"rgb("+[b.r,b.g,b.b].join(",")+")":"rgba("+[b.r,b.g,b.b,b.a].join(",")+")"};b.normalize=function(){function a(b,c,d){return c<b?b:c>d?d:c}b.r=a(0,parseInt(b.r),255);b.g=a(0,parseInt(b.g),
255);b.b=a(0,parseInt(b.b),255);b.a=a(0,b.a,1);return b};b.clone=function(){return e.color.make(b.r,b.b,b.g,b.a)};return b.normalize()};e.color.extract=function(c,a){var d;do{d=c.css(a).toLowerCase();if(d!=""&&d!="transparent")break;c=c.parent()}while(!e.nodeName(c.get(0),"body"));d=="rgba(0, 0, 0, 0)"&&(d="transparent");return e.color.parse(d)};e.color.parse=function(c){var a,d=e.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))return d(parseInt(a[1],10),
parseInt(a[2],10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return d(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))return d(parseFloat(a[1])*2.55,parseFloat(a[2])*2.55,parseFloat(a[3])*2.55);if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return d(parseFloat(a[1])*
2.55,parseFloat(a[2])*2.55,parseFloat(a[3])*2.55,parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))return d(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))return d(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));c=e.trim(c).toLowerCase();return c=="transparent"?d(255,255,255,0):(a=g[c]||[0,0,0],d(a[0],a[1],a[2]))};var g={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,
0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,
211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(a){function r(c,d,b){c.value=a(d).text();a(c).change();a.browser.msie||c.focus();b.hide()}function n(c,a){var b=c.getHours(),h=a.show24Hours?b:(b+11)%12+1,f=c.getMinutes();return(h<10?"0":"")+h+a.separator+((f<10?"0":"")+f)+(a.show24Hours?"":b<12?" AM":" PM")}function o(c,a){return typeof c=="object"?p(c):q(c,a)}function q(a,d){if(a){var b=a.split(d.separator),h=parseFloat(b[0]),b=parseFloat(b[1]);d.show24Hours||(h===12&&a.indexOf("AM")!==-1?h=0:h!==12&&a.indexOf("PM")!==-1&&(h+=12));return p(new Date(0,
0,0,h,b,0))}return null}function p(a){a.setFullYear(2001);a.setMonth(0);a.setDate(0);return a}a.fn.timePicker=function(c){var d=a.extend({},a.fn.timePicker.defaults,c);return this.each(function(){a.timePicker(this,d)})};a.timePicker=function(c,d){var b=a(c)[0];return b.timePicker||(b.timePicker=new jQuery._timePicker(b,d))};a.timePicker.version="0.3";a._timePicker=function(c,d){var b=false,h=false,f=o(d.startTime,d),s=o(d.endTime,d);a(c).attr("autocomplete","OFF");for(var l=[],j=new Date(f);j<=s;)l[l.length]=
n(j,d),j=new Date(j.setMinutes(j.getMinutes()+d.step));for(var e=a('<div class="time-picker'+(d.show24Hours?"":" time-picker-12hours")+'"></div>'),k=a("<ul></ul>"),j=0;j<l.length;j++)k.append("<li>"+l[j]+"</li>");e.append(k);e.appendTo("body").hide();e.mouseover(function(){b=true}).mouseout(function(){b=false});a("li",k).mouseover(function(){h||(a("li.selected",e).removeClass("selected"),a(this).addClass("selected"))}).mousedown(function(){b=true}).click(function(){r(c,this,e,d);b=false});var m=function(){if(e.is(":visible"))return false;
a("li",e).removeClass("selected");var g=a(c).offset();e.css({top:g.top+c.offsetHeight,left:g.left});e.show();var b=c.value?q(c.value,d):f,g=f.getHours()*60+f.getMinutes(),b=b.getHours()*60+b.getMinutes()-g,b=Math.round(b/d.step),g=p(new Date(0,0,0,0,b*d.step+g,0)),g=f<g&&g<=s?g:f,g=a("li:contains("+n(g,d)+")",e);if(g.length)g.addClass("selected"),e[0].scrollTop=g[0].offsetTop;return true};a(c).focus(m).click(m);a(c).blur(function(){b||e.hide()});l=a.browser.opera||a.browser.mozilla?"keypress":"keydown";
a(c)[l](function(b){h=true;var f=e[0].scrollTop;switch(b.keyCode){case 38:if(m())return false;var b=a("li.selected",k),i=b.prev().addClass("selected")[0];if(i){if(b.removeClass("selected"),i.offsetTop<f)e[0].scrollTop=f-i.offsetHeight}else b.removeClass("selected"),i=a("li:last",k).addClass("selected")[0],e[0].scrollTop=i.offsetTop-i.offsetHeight;return false;case 40:if(m())return false;b=a("li.selected",k);if(i=b.next().addClass("selected")[0]){if(b.removeClass("selected"),i.offsetTop+i.offsetHeight>
f+e[0].offsetHeight)e[0].scrollTop=f+i.offsetHeight}else b.removeClass("selected"),a("li:first",k).addClass("selected"),e[0].scrollTop=0;return false;case 13:return e.is(":visible")&&(f=a("li.selected",k)[0],r(c,f,e,d)),false;case 27:return e.hide(),false}return true});a(c).keyup(function(){h=false});this.getTime=function(){return q(c.value,d)};this.setTime=function(b){c.value=n(o(b,d),d);a(c).change()}};a.fn.timePicker.defaults={step:30,startTime:new Date(0,0,0,0,0,0),endTime:new Date(0,0,0,23,30,
0),separator:":",show24Hours:true}})(jQuery);
function load_i18n_strings(){var a=$.ajax({async:false,url:base_app_url+"strings/load/"+agendav_version,dataType:"json",method:"GET",ifModified:false});a.done(function(a){i18n=a;set_default_datepicker_options()});a.fail(function(){show_error("Error loading translation","Please, contact your system administrator")})}
function _(a,c,d){var b="["+a+":"+c+"]";if(typeof i18n!="undefined"&&(a=="messages"||a=="labels"))a=="labels"&&i18n.labels[c]?b=i18n.labels[c]:a=="messages"&&i18n.messages[c]&&(b=i18n.messages[c]);for(var e in d)b=b.replace(e,d[e]);return b}function labels_as_array(a){if(!$.isArray(a))return[];for(var c=[],d=a.length,b=0;b<d;b++)c.push(i18n.labels[a[b]]);return c}
function month_names_long(){return labels_as_array("january,february,march,april,may,june,july,august,september,october,november,december".split(","))}function month_names_short(){return labels_as_array("january_short,february_short,march_short,april_short,may_short,june_short,july_short,august,september_short,october_short,november_short,december_short".split(","))}function day_names_long(){return labels_as_array("sunday,monday,tuesday,wednesday,thursday,friday,saturday".split(","))}
function day_names_short(){return labels_as_array("sunday_short,monday_short,tuesday_short,wednesday_short,thursday_short,friday_short,saturday_short".split(","))};
var ved="div.view_event_details",ced="#com_event_dialog",ccd="#create_calendar_dialog",mcd="#modify_calendar_dialog",dcd="#delete_calendar_dialog",scmr="#share_calendar_manager_row_template";
$(document).ready(function(){load_i18n_strings();$("body").hasClass("loginpage")?($("input:submit").button(),$('input[name="user"]').focus()):$("body").hasClass("prefspage")?($("#prefs_tabs").tabs(),$("#prefs_buttons button").button(),$("#return_button").on("click",function(){window.location=base_app_url;return false}),$("#save_button").on("click",function(){var a=$("#prefs_form");proceed_send_ajax_form(a,function(){show_success(_("messages","info_prefssaved"),"")},function(a){show_error(_("messages",
"error_invalidinput"),a)},function(){})})):$("body").hasClass("calendarpage")&&(set_default_colorpicker_options(),$("#calendar_view").fullCalendar({selectable:true,editable:true,firstDay:prefs_firstday,timeFormat:{agenda:prefs_timeformat+"{ - "+prefs_timeformat+"}","":prefs_timeformat},columnFormat:{month:prefs_format_column_month,week:prefs_format_column_week,day:prefs_format_column_day,table:prefs_format_column_table},titleFormat:{month:prefs_format_title_month,week:prefs_format_title_week,day:prefs_format_title_day,
table:prefs_format_title_table},currentTimeIndicator:true,weekMode:"liquid",height:calendar_height(),windowResize:function(){$(this).fullCalendar("option","height",calendar_height())},header:{left:"month,agendaWeek,agendaDay table",center:"title",right:"today prev,next"},listTexts:{until:_("labels","repeatuntil"),past:_("labels","pastevents"),today:_("labels","today"),tomorrow:_("labels","tomorrow"),thisWeek:_("labels","thisweek"),nextWeek:_("labels","nextweek"),thisMonth:_("labels","thismonth"),
nextMonth:_("labels","nextmonth"),future:_("labels","future"),week:"W"},listSections:"smart",listRange:30,listPage:7,monthNames:month_names_long(),monthNamesShort:month_names_short(),dayNames:day_names_long(),dayNamesShort:day_names_short(),buttonText:{today:_("labels","today"),month:_("labels","month"),week:_("labels","week"),day:_("labels","day"),table:_("labels","tableview")},theme:true,allDayText:_("labels","allday"),axisFormat:prefs_timeformat,slotMinutes:30,firstHour:8,allDayDefault:false,loading:function(a){a?
$("#calendar_view").mask(_("messages","overlay_synchronizing"),500):$("#calendar_view").unmask()},eventRender:event_render_callback,eventClick:event_click_callback,select:slots_drag_callback,selectHelper:select_helper,eventResize:event_resize_callback,eventDrop:event_drop_callback}),$('<span class="fc-button-refresh">'+_("labels","refresh")+"</span>").appendTo("#calendar_view td.fc-header-right").button().on("click",function(){update_calendar_list(true)}).before('<span class="fc-header-space">'),
$("#calendar_view span.fc-button-today").after('<span class="fc-button-datepicker"><img src="'+base_url+'/img/datepicker.gif" alt="'+_("labels","choose_date")+'" /></span>').after('<input type="hidden" id="datepicker_fullcalendar" />').after('<span class="fc-header-space" />').nextUntil("#datepicker_fullcalendar").next().datepicker({changeYear:true,closeText:_("labels","cancel"),onSelect:function(){var a=$("#datepicker_fullcalendar").datepicker("getDate");$("#calendar_view").fullCalendar("gotoDate",
a)}}).end().nextUntil("span.fc-button-datepicker").next().on("click",function(){$("#datepicker_fullcalendar").datepicker("setDate",$("#calendar_view").fullCalendar("getDate"));$("#datepicker_fullcalendar").datepicker("show")}),$("#calendar_view").fullCalendar("renderEvent",{title:"Little portal",start:"1985-02-15T00:00:00Z",end:"1985-02-15T23:59:59Z",allDay:true,editable:false,color:"#E78AEF"},true),$("div.calendar_list").on("click","img.cfg",function(a){a.stopPropagation();a=$(this).parent();calendar_modify_form(a[0])}).on("click",
"li.available_calendar",function(){toggle_calendar($(this))}),update_calendar_list(true),$("#sidebar").on("click","#toggle_all_shared_calendars",function(){var a=$("#shared_calendar_list").find("ul").children();$(this).hasClass("hide_all")?($.map(a,function(a){hide_calendar($(a))}),$(this).removeClass("hide_all").addClass("show_all").attr("src",base_url+"img/color_swatch.png")):($.map(a,function(a){show_calendar($(a))}),$(this).removeClass("show_all").addClass("hide_all").attr("src",base_url+"img/color_swatch_empty.png"))}),
$("#calendar_add").on("click",calendar_create_form),$("#shortcut_add_event").button({icons:{primary:"ui-icon-plusthick"}}).on("click",function(){var a={start:fulldatetimestring($("#calendar_view").fullCalendar("getDate")),allday:false,view:"month"};$("#calendar_view").fullCalendar("unselect");event_field_form("new",a)}));$("#usermenu").qtip({content:$("#usermenu_content"),position:{my:"top center",at:"bottom center"},style:{tip:true,classes:"ui-tooltip-bootstrap agendav-menu"},show:{event:"click",
delay:0},hide:{event:"unfocus"}})});
var calendar_height=function(){var a=$("#calendar_view").offset();return $(window).height()-Math.ceil(a.top)-30},show_error=function(a,b){$("#popup").freeow(a,b,{classes:["popup_error"],autoHide:false,showStyle:{opacity:1,left:0},hideStyle:{opacity:0,left:"400px"}})},show_success=function(a,b){$("#popup").freeow(a,b,{classes:["popup_success"],autoHide:true,autoHideDelay:2E3,showStyle:{opacity:1,left:0},hideStyle:{opacity:0,left:"400px"}})},get_data=function(a){return $.data($("body")[0],a)},set_data=
function(a,b){$.data($("body")[0],a,b)},remove_data=function(a){$.removeData($("body")[0],a)},load_generated_dialog=function(a,b,c,d,e,h,g){h="#"+h;if($(h).length!=0)return false;b=generate_on_the_fly_form(base_app_url+"caldav2json/edit_event",b);if(get_data("formcreation")=="ok"){b=$("#"+b);$(b).attr("action");var f=$(b).serialize();$("body").mask(_("messages","overlay_loading_dialog"),500);a=$.ajax({url:base_app_url+a,cache:false,type:"POST",data:f,dataType:"html"});a.then(function(){$("body").unmask()});
a.fail(function(a,b){show_error(_("messages","error_loading_dialog"),_("messages","error_oops")+": "+b)});a.done(function(a){$("body").append(a);$(h).dialog({autoOpen:true,buttons:e,title:d,minWidth:g,modal:true,open:function(a){c();$(h).dialog("option","position","center");a=$(a.target).parent().find(".ui-dialog-buttonset").children();add_button_icons(a)},close:function(){$(this).remove()}})});$(b).remove()}else show_error(_("messages","error_interfacefailure"),_("messages","error_oops"))},proceed_send_ajax_form=
function(a,b,c,d){var e=$(a).attr("action"),a=$(a).serialize();$("body").mask(_("messages","overlay_sending_form"),1E3);e=$.ajax({url:e,cache:false,type:"POST",data:a,dataType:"json"});e.then(function(){$("body").unmask()});e.fail(function(a,b){show_error(_("messages","error_interfacefailure"),_("messages","error_oops")+":"+b);set_data("lastoperation","failed");d()});e.done(function(a){var e=a.result,a=a.message;e=="ERROR"?(set_data("lastoperation","failed"),show_error(_("messages","error_internal"),
a),d()):e=="EXCEPTION"?(set_data("lastoperation","failed"),c(a)):e=="SUCCESS"?(set_data("lastoperation","success"),b(a)):show_error(_("messages","error_internal"),_("messages","error_oops")+":"+e)})},generate_on_the_fly_form=function(a,b){for(var c="",d=0;d<10;d++)c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(Math.random()*62));d=$.ajax({url:base_app_url+"dialog_generator/on_the_fly_form/"+c,cache:false,type:"POST",contentType:"text",dataType:"text",async:false});
d.fail(function(){session_expired();set_data("formcreation","failed")});d.done(function(c){var d="";$.each(b,function(a,b){d+='<input type="hidden" name="'+a+'" value="'+b+'" />'});$(c).append(d).attr("action",a).appendTo(document.body);set_data("formcreation","ok")});return c},destroy_dialog=function(a){$(a).dialog("close");$(a).dialog("destroy");$(a).remove()},set_default_datepicker_options=function(){$.datepicker.regional.custom={closeText:_("labels","close"),prevText:_("labels","previous"),nextText:_("labels",
"next"),currentText:_("labels","today"),monthNames:month_names_long(),monthNamesShort:month_names_short(),dayNames:day_names_long(),dayNamesShort:day_names_short(),dayNamesMin:day_names_short(),weekHeader:"Sm",firstDay:prefs_firstday,isRTL:false,showMonthAfterYear:false,yearSuffix:""};$.datepicker.setDefaults($.datepicker.regional.custom);$.datepicker.setDefaults({constrainInput:true});$.datepicker.setDefaults({dateFormat:prefs_dateformat})},set_end_minDate=function(){var a=ced+" input.end_date",
b=ced+" input.recurrence_until",c=$(ced+" input.start_date").datepicker("getDate");c.setTime(c.getTime());$(a).datepicker("option","minDate",c);$(b).datepicker("option","minDate",c)},update_recurrence_options=function(a){a=="none"?($(ced+" input.recurrence_count").val(""),$(ced+" input.recurrence_until").val(""),$(ced+" input.recurrence_count").attr("disabled","disabled"),$(ced+" input.recurrence_count").addClass("ui-state-disabled"),$(ced+' label[for="recurrence_count"]').addClass("ui-state-disabled"),
$(ced+" input.recurrence_until").attr("disabled","disabled"),$(ced+" input.recurrence_until").datepicker("disable"),$(ced+" input.recurrence_until").addClass("ui-state-disabled"),$(ced+' label[for="recurrence_until"]').addClass("ui-state-disabled")):(enforce_exclusive_recurrence_field("recurrence_count","recurrence_until"),enforce_exclusive_recurrence_field("recurrence_until","recurrence_count"))},event_field_form=function(a,b){var c="dialog_generator/",d;a=="new"?(c+="create_event",d=_("labels",
"createevent")):(c+="edit_event",d=_("labels","editevent"));load_generated_dialog(c,b,function(){var b={show24Hours:prefs_timeformat_option=="24"?true:false,separator:":",step:30};$(ced+"_tabs").tabs();$(ced+" input.start_time").timePicker(b);$(ced+" input.end_time").timePicker(b);$(ced+" input.start_date").datepicker({onSelect:function(){set_end_minDate()}});$(ced+" input.end_date").datepicker();$(ced+" input.recurrence_until").datepicker();$(ced+" input.end_time").data("untouched",true);set_end_minDate();
update_recurrence_options($(ced+" select.recurrence_type").val());$(ced).on("change","input.allday",function(){var a=$(ced+" input.start_date").datepicker("getDate");set_end_minDate();$(this).is(":checked")?($(ced+" input.start_time").hide(),$(ced+" input.end_time").hide()):($(ced+" input.end_date").removeAttr("disabled"),$(ced+" input.end_date").removeClass("ui-state-disabled"),$(ced+" input.end_date").datepicker("setDate",a),$(ced+" input.start_time").show(),$(ced+" input.end_time").show())});$(ced).on("change",
"select.recurrence_type",function(){$(this).val();update_recurrence_options($(this).val())});$(ced).on("keyup","input.recurrence_count",function(){enforce_exclusive_recurrence_field("recurrence_count","recurrence_until")}).on("keyup change","input.recurrence_until",function(){enforce_exclusive_recurrence_field("recurrence_until","recurrence_count")});var c=$.timePicker(ced+" input.start_time").getTime(),d=$.timePicker(ced+" input.end_time").getTime()-c.getTime();$(ced).on("change","input.start_time",
function(){if($(ced+" input.end_time").data("untouched")){var a=$.timePicker(ced+" input.start_time").getTime(),b=$.timePicker(ced+" input.end_time").getTime()-c.getTime();$.timePicker(ced+" input.end_time").setTime(new Date(a.getTime()+b));c=a}});$(ced).on("change","input.end_time",function(){$.timePicker(this).getTime()-$.timePicker(ced+" input.start_time").getTime()!=d&&$(this).data("untouched",false)});a=="new"&&$('input[name="summary"]').focus()},d,[{text:_("labels","save"),"class":"addicon btn-icon-event-edit",
click:function(){var a=$("#com_form");proceed_send_ajax_form(a,function(a){$.each(a,function(a,b){reload_event_source(b)});destroy_dialog(ced)},function(a){show_error(_("messages","error_invalidinput"),a)},function(){})}},{text:_("labels","cancel"),"class":"addicon btn-icon-cancel",click:function(){destroy_dialog(ced)}}],"com_event_dialog",500)},update_single_event=function(a,b){$.each(b,function(b,d){a[b]=d});$("#calendar_view").fullCalendar("updateEvent",a)},calendar_create_form=function(){var a=
_("labels","newcalendar");load_generated_dialog("dialog_generator/create_calendar",{},function(){$("input.pick_color").colorPicker()},a,[{text:_("labels","create"),"class":"addicon btn-icon-calendar-add",click:function(){var a=$("#calendar_create_form");proceed_send_ajax_form(a,function(){destroy_dialog(ccd);update_calendar_list(false)},function(a){show_error(_("messages","error_invalidinput"),a)},function(){})}},{text:_("labels","cancel"),"class":"addicon btn-icon-cancel",click:function(){destroy_dialog(ccd)}}],
"create_calendar_dialog",400)},calendar_modify_form=function(a){var b=_("labels","modifycalendar"),c=$(a).data(),d={calendar:c.calendar,color:c.color,displayname:c.displayname,sid:c.sid,shared:c.shared,user_from:c.user_from,write_access:c.write_access,url:c.url},e=[{text:_("labels","deletecalendar"),"class":"addicon btn-icon-calendar-delete",click:function(){destroy_dialog(mcd);load_generated_dialog("dialog_generator/delete_calendar",{calendar:$(a).data().calendar,displayname:$(a).data().displayname},
function(){},_("labels","delete"),[{text:_("labels","yes"),"class":"addicon btn-icon-calendar-delete",click:function(){var a=$("#delete_calendar_form");proceed_send_ajax_form(a,function(a){$(".calendar_list li.available_calendar").each(function(){var b=$(this).data();if(b.calendar==a)return $("#calendar_view").fullCalendar("removeEventSource",b.eventsource),$(this).remove(),false})},function(a){show_error(_("messages","error_caldelete"),a)},function(){});destroy_dialog(dcd)}},{text:_("labels","cancel"),
"class":"addicon btn-icon-cancel",click:function(){destroy_dialog(dcd)}}],"delete_calendar_dialog",500)}},{text:_("labels","save"),"class":"addicon btn-icon-calendar-edit",click:function(){var a=$("#modify_calendar_form");a.find(".generated_share").remove();_generate_share_hidden_inputs(a);proceed_send_ajax_form(a,function(){destroy_dialog(mcd);update_calendar_list(false)},function(a){show_error(_("messages","error_invalidinput"),a)},function(){})}},{text:_("labels","cancel"),"class":"addicon btn-icon-cancel",
click:function(){destroy_dialog(mcd)}}];c.shared===true&&e.splice(0,1);load_generated_dialog("dialog_generator/modify_calendar",d,function(){$("input.pick_color").colorPicker();$(mcd+"_tabs").tabs();enable_calendar_sharing===true&&c.shared!==true&&share_manager()},b,e,"modify_calendar_dialog",500)},update_calendar_list=function update_calendar_list(b){b&&$("body").mask(_("messages","overlay_loading_calendar_list"),500);var c=$.ajax({url:base_app_url+"caldav2json/calendar_list",cache:false,dataType:"json",
async:false});c.then(function(){b&&$("body").unmask()});c.fail(function(b,c){show_error(_("messages","error_loading_calendar_list"),_("messages","error_oops")+c)});c.done(function(b){$(".calendar_list li.available_calendar").each(function(){var b=$(this).data();$("#calendar_view").fullCalendar("removeEventSource",b.eventsource);$(this).remove()});var c=0,h=0,g=document.createDocumentFragment(),f=document.createDocumentFragment(),i=[];$.each(b,function(b,d){c++;var j=generate_calendar_entry(d);d.shared==
true?(h++,f.appendChild(j[0])):g.appendChild(j[0]);i.push($(j).data().eventsource)});if(c==0)b=get_data("last_calendar_count"),b===void 0||b!="0"?(set_data("last_calendar_count",0),setTimeout(function(){update_calendar_list(false)},1)):(show_error(_("messages","notice_no_calendars"),""),$("#shortcut_add_event").button("disable"));else{set_data("last_calendar_count",c);$("#own_calendar_list ul")[0].appendChild(g);h==0?$("#shared_calendar_list").hide():($("#shared_calendar_list ul")[0].appendChild(f),
$("#shared_calendar_list").show());for(adjust_calendar_names_width();c--;)$("#calendar_view").fullCalendar("addEventSource",i[c]);$("#shortcut_add_event").button("enable")}})},generate_event_source=function(a){return{url:base_app_url+"caldav2json/events#"+a,cache:false,data:{calendar:a},error:function(b){b.status!==void 0&&b.status==401?session_expired():show_error(_("messages","error_interfacefailure"),_("messages","error_loadevents",{"%cal":a}))},startParamUTC:true,endParamUTC:true}},session_refresh=
function session_refresh(b){var c=$.ajax({url:base_app_url+"js_generator/keepalive",cache:false,method:"GET",dataType:"html"});c.done(function(c){c!==""?$("body").append(c):setTimeout(function(){session_refresh(b)},b)});c.fail(function(){session_expired()})},add_button_icons=function(a){a.filter("button.addicon").removeClass("addicon").removeClass("ui-button-text-only").addClass("ui-button-text-icon-primary").each(function(a,c){var d=$(c).attr("class").split(" ");$.each(d,function(a,b){if(b.match(/^btn-icon-/))return $(c).prepend('<span class="ui-button-icon-primary ui-icon '+
b+'"></span>'),$(c).removeClass(b),false})})},generate_calendar_entry=function(a){a.color=a.color===void 0||a.color===false?"#"+default_calendar_color:a.color.substring(0,7);var b=fg_for_bg(a.color),c=$.color.parse(a.color),c=c.scale("rgb",b=="#000000"?0.8:1.8).toString(),d=$("<div></div>").addClass("calendar_color").css("background-color",a.color).css("border-color",c),d=$("<li></li>").addClass("available_calendar").attr("title",a.displayname).html('<span class="text">'+a.displayname+"</span>").prepend(d),
e=generate_event_source(a.calendar);e.ignoreTimezone=true;e.color=a.color;e.textColor=b;e.borderColor=c;if(a.shared!==void 0&&a.shared==true&&(d.attr("title",d.attr("title")+" (@"+a.user_from+")"),a.write_access=="0"))e.editable=false;a.default_calendar===true&&d.addClass("default_calendar");a.eventsource=e;d.data(a);d.disableSelection();d.append('<img class="cfg pseudobutton" src="'+base_url+'img/gear_in.png" />');return d},get_calendar_data=function(a){var b=void 0;$(".calendar_list li.available_calendar").each(function(){var c=
$(this).data();if(c.calendar==a)return b=c,false});return b},get_calendar_displayname=function(a){a=get_calendar_data(a);return a===void 0||a.displayname===void 0?"(?)":a.displayname},reload_event_source=function(a){var b=void 0;$(".calendar_list li.available_calendar").each(function(){var c=$(this).data();if(c.calendar==a)return b=c.eventsource,false});b!==void 0?($("#calendar_view").fullCalendar("removeEventSource",b),$("#calendar_view").fullCalendar("addEventSource",b)):show_error(_("messages",
"error_interfacefailure"),_("messages","error_calendarnotfound",{"%calendar":a}))},enforce_exclusive_recurrence_field=function(a,b){$(ced+" input."+a).val()==""?($(ced+" input."+b).removeAttr("disabled"),$(ced+" input."+b).removeClass("ui-state-disabled"),$(ced+' label[for="'+b+'"]').removeClass("ui-state-disabled"),b=="recurrence_until"&&$(ced+" input."+b).datepicker("enable")):($(ced+" input."+b).attr("disabled","disabled"),$(ced+" input."+b).addClass("ui-state-disabled"),$(ced+" input."+b).val(""),
$(ced+' label[for="'+b+'"]').addClass("ui-state-disabled"),b=="recurrence_until"&&$(ced+" input."+b).datepicker("disable"))},event_bubble_content=function(a){var b=$("#view_event_details_template").clone();b.find("span.calendar_value").html(get_calendar_displayname(a.calendar));a.location!==void 0?b.find("span.location_value").html(a.location):b.find("p.location").hide();b.find("span.start_value").html(a.formatted_start+" - ").end().find("span.end_value").html(a.formatted_end+"");a.formatted_description!==
void 0?b.find("p.description_value").html(a.formatted_description):b.find("p.description").hide();a.rrule!==void 0?a.rrule_explained!==void 0?b.find("div.unparseable_rrule").hide().end().find("span.rrule_explained_value").html(a.rrule_explained):b.find("div.parseable_rrule").hide().end().find("span.rrule_raw_value").html(a.rrule).end():b.find("div.unparseable_rrule").hide().end().find("div.parseable_rrule").hide();a=get_calendar_data(a.calendar);a!==void 0&&a.shared===true&&a.write_access=="0"&&b.find("div.actions").remove();
return b.html()},timestamp=function(a){return Math.round(a.getTime()/1E3)},fulldatetimestring=function(a){if(a!=void 0)return $.fullCalendar.formatDate(a,"yyyyMMddHHmmss")},fg_for_bg=function(a){a=parseInt(a.substr(1),16);return(a>>>16)+(a>>>8&255)+(a&255)<500?"#ffffff":"#000000"},session_expired=function(){$(".ui-dialog-content").dialog("close");show_error(_("messages","error_sessexpired"),_("messages","error_loginagain"));setTimeout(function(){window.location=base_url},2E3)},adjust_calendar_names_width=
function(){$(".calendar_list li").each(function(){var a=$(this),b=a.width(),c=a.find("span.shared"),b=b-a.find("span.text").position().left+(a.outerWidth()-b);c.length==1&&(b-=c.outerWidth());a.find("span.text").width(b)})},share_manager=function(){var a=$(mcd+" table.share_calendar_manager"),b=$(mcd+" table.share_calendar_manager_new");share_manager_no_entries_placeholder();a.on("click",".share_calendar_manager_delete",function(){$(this).parent().parent().fadeOut("fast",function(){$(this).remove();
share_manager_no_entries_placeholder()})});var c={},d;b.find("input.share_calendar_manager_username_new").autocomplete({minLength:3,source:function(a,b){var g=a.term;g in c?b(c[g]):d=$.getJSON(base_app_url+"caldav2json/principal_search",a,function(a,e,k){c[g]=a;k===d&&b(a)})},focus:function(a,b){$(this).val(b.item.username);return false},select:function(a,b){$(this).val(b.item.username);return false}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append("<a>"+
b.displayname+'<span style="font-style: italic"> &lt;'+b.email+"&gt;</span></a>").appendTo(a)};b.on("click",".share_calendar_manager_add",function(){var b=$(this).parent().parent().find(".share_calendar_manager_username_new").val(),c=$(this).parent().parent().find("select").val();if(b!=""){var d=false;a.find(".share_data_username").each(function(){!d&&$(this).text()==b&&(d=true,$(this).parent().parent().effect("highlight",{},"slow"))});if(!d){var f=$(scmr).clone().find("tbody");f.find(".share_data_username").html(b).end().find("select").val(c).end();
a.find("tbody").append(f.html());$(this).parent().parent().find(".share_calendar_manager_username_new").val("");a.find("tbody tr:last select").val(c);share_manager_no_entries_placeholder()}}})},share_manager_no_entries_placeholder=function(){var a=$(mcd+" table.share_calendar_manager");a.find("tbody tr").length==1?a.find("tr.share_calendar_manager_empty td").show():a.find("tr.share_calendar_manager_empty td").hide()},_generate_share_hidden_inputs=function(a){$(mcd+" table.share_calendar_manager > tbody > tr:not(.share_calendar_manager_empty)").each(function(b){var c=
{},d=$(this).attr("id");d!==void 0&&(d=d.replace("sid-",""),$.extend(c,{sid:d}));var d=$(this).find(".share_data_username:first").html(),e=$(this).find("select").val();$.extend(c,{username:d,write_access:e});$.each(c,function(c,d){a.append($('<input type="hidden">').attr("name","share_with["+b+"]["+c+"]").val(d))})})},event_render_callback=function(a,b){b.qtip({content:{text:event_bubble_content(a),title:{text:a.title,button:true}},position:{my:"bottom center",at:"top center",viewport:$("#calendar_view")},
style:{classes:"view_event_details ui-tooltip-bootstrap",tip:true},show:{target:$("#calendar_view"),event:false,solo:$("#calendar_view"),effect:false},hide:{fixed:true,event:"unfocus",effect:false},events:{show:function(a,b){$(this).find("button.link_delete_event").off("click").on("click",function(){delete_event_handler()}).end().find("button.link_modify_event").off("click").on("click",function(){modify_event_handler()});$(window).on("keydown.tooltipevents",function(a){a.keyCode===$.ui.keyCode.ESCAPE&&
b.hide(a)});var e=b.elements.tooltip.find("div.actions").find("button.addicon").button();add_button_icons(e)},hide:function(a){a.originalEvent!=void 0?(a=$(a.originalEvent.target).parents(),a=a.length>1&&a.andSelf().filter(".fc-event").length==1):a=false;set_data("tooltip_hide_clicked_event",a);a=get_data("current_event");set_data("recently_hidden_event",a);$(window).off("keydown.tooltipevents")}}})},event_click_callback=function(a,b){var c=get_data("recently_hidden_event"),d=get_data("tooltip_hide_clicked_event");
remove_data("current_event");if(c!=a||d===false&&c==a)set_data("current_event",a),$(this).qtip("show",b);remove_data("recently_hidden_event");remove_data("tooltip_hide_clicked_event")},slots_drag_callback=function(a,b,c,d,e){c=e.name=="month"?false:c;a={start:fulldatetimestring(a),end:fulldatetimestring(b),allday:c,view:e.name};$("#calendar_view").fullCalendar("unselect");event_field_form("new",a)},select_helper=function(a,b){return $('<div style="border: 1px solid black; background-color: #f0f0f0;" class="selecthelper"/>').text($.fullCalendar.formatDates(a,
b,prefs_timeformat+"{ - "+prefs_timeformat+"}"))},event_resize_callback=function(a,b,c,d,e,h,g){b=generate_on_the_fly_form(base_app_url+"caldav2json/resize_or_drag_event",{uid:a.uid,calendar:a.calendar,etag:a.etag,view:g.name,dayDelta:b,minuteDelta:c,allday:a.allDay,was_allday:a.was_allday,timezone:a.timezone,type:"resize"});if(get_data("formcreation")=="ok"){var f=$("#"+b);proceed_send_ajax_form(f,function(b){update_single_event(a,b)},function(a){show_error(_("messages","error_modfailed"),a);d()},
function(){d()})}$(f).remove()},event_drop_callback=function(a,b,c,d,e,h,g,f){b=generate_on_the_fly_form(base_app_url+"caldav2json/resize_or_drag_event",{uid:a.uid,calendar:a.calendar,etag:a.etag,view:f.name,dayDelta:b,minuteDelta:c,allday:a.allDay,was_allday:a.orig_allday,timezone:a.timezone,type:"drag"});if(get_data("formcreation")=="ok"){var i=$("#"+b);proceed_send_ajax_form(i,function(b){update_single_event(a,b)},function(a){show_error(_("messages","error_modfailed"),a);e()},function(){e()})}$(i).remove()},
delete_event_handler=function(){var a=get_data("current_event");if(a===void 0)show_error(_("messages","error_interfacefailure"),_("messages","error_current_event_not_loaded"));else return load_generated_dialog("dialog_generator/delete_event",{},function(){$("#delete_event_dialog span.calendar").html(get_calendar_displayname(a.calendar));$("#delete_event_dialog p.title").html(a.title);a.rrule===void 0&&$("#delete_event_dialog div.rrule").hide();var b=$("#delete_form");b.find("input.uid").val(a.uid);
b.find("input.calendar").val(a.calendar);b.find("input.href").val(a.href);b.find("input.etag").val(a.etag)},_("labels","deleteevent"),[{text:_("labels","yes"),"class":"addicon btn-icon-event-delete",click:function(){var a=$("#delete_form");proceed_send_ajax_form(a,function(){$("#calendar_view").fullCalendar("removeEvents",get_data("current_event").id)},function(a){show_error(_("messages","error_event_not_deleted"),a)},function(){});destroy_dialog("#delete_event_dialog")}},{text:_("labels","cancel"),
"class":"addicon btn-icon-cancel",click:function(){destroy_dialog("#delete_event_dialog")}}],"delete_event_dialog",400),$(ved).qtip("hide"),false},modify_event_handler=function(){var a=get_data("current_event");if(a===void 0)show_error(_("messages","error_interfacefailure"),_("messages","error_current_event_not_loaded"));else return a={uid:a.uid,calendar:a.calendar,href:a.href,etag:a.etag,start:fulldatetimestring(a.start),end:fulldatetimestring(a.end),summary:a.title,location:a.location,allday:a.allDay,
description:a.description,rrule:a.rrule,rrule_serialized:a.rrule_serialized,rrule_explained:a.rrule_explained,icalendar_class:a.icalendar_class,transp:a.transp,recurrence_id:a.recurrence_id,orig_start:fulldatetimestring($.fullCalendar.parseDate(a.orig_start)),orig_end:fulldatetimestring($.fullCalendar.parseDate(a.orig_end))},$(ved).qtip("hide"),event_field_form("modify",a),false},show_calendar=function(a){$("#calendar_view").fullCalendar("addEventSource",a.data().eventsource);a.removeClass("transparent")},
hide_calendar=function(a){$("#calendar_view").fullCalendar("removeEventSource",a.data().eventsource);a.addClass("transparent")},toggle_calendar=function(a){a.hasClass("transparent")?show_calendar(a):hide_calendar(a)};
